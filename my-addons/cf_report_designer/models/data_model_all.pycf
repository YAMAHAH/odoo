pycf/1.0:eyJ2ZXJzaW9uIjogIjEuMCIsICJsaWNlbnNlIjogZmFsc2UsICJleHBpcmUiOiBmYWxzZSwgImRhdGEiOiAiIyAtKi0gY29kaW5nOiB1dGYtOCAtKi1cclxuIyBcdTVlYjdcdTg2NGVcdThmNmZcdTRlZjZcdTVkZTVcdTRmNWNcdTViYTRcclxuIyBodHRwOi8vd3d3LmtoY2xvdWQubmV0XHJcbiMgUVE6IDM2MDAyNjYwNlxyXG4jIHdlY2hhdDogMzYwMDI2NjA2XHJcbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxyXG5cclxuaW1wb3J0IG9zXHJcbmltcG9ydCBzeXNcclxuaW1wb3J0IGxvZ2dpbmdcclxuaW1wb3J0IHN0cmluZ1xyXG5cclxudHJ5OlxyXG4gICAgaW1wb3J0IHNpbXBsZWpzb24gYXMganNvblxyXG5leGNlcHQgSW1wb3J0RXJyb3I6XHJcbiAgICBpbXBvcnQganNvblxyXG5pbXBvcnQgdGltZVxyXG4jIGZyb20gbHhtbCBpbXBvcnQgZXRyZWVcclxudHJ5OlxyXG4gICAgaW1wb3J0IHhtbC5ldHJlZS5jRWxlbWVudFRyZWUgYXMgRVRcclxuZXhjZXB0IEltcG9ydEVycm9yOlxyXG4gICAgaW1wb3J0IHhtbC5ldHJlZS5FbGVtZW50VHJlZSBhcyBFVFxyXG5mcm9tIHhtbC5kb20gaW1wb3J0IG1pbmlkb21cclxuXHJcbmZyb20gb2Rvby5leGNlcHRpb25zIGltcG9ydCBBY2Nlc3NFcnJvciwgVXNlckVycm9yLCBWYWxpZGF0aW9uRXJyb3JcclxuZnJvbSBvZG9vIGltcG9ydCBtb2RlbHMsIGZpZWxkcywgYXBpLCBfXHJcbnRyeTpcclxuICAgIGZyb20gQ3J5cHRvLlV0aWwuUGFkZGluZyBpbXBvcnQgcGFkLCB1bnBhZFxyXG4gICAgZnJvbSBDcnlwdG8uQ2lwaGVyIGltcG9ydCBBRVNcclxuZXhjZXB0IEltcG9ydEVycm9yIGFzIGU6XHJcbiAgICByYWlzZSBJbXBvcnRFcnJvcignRmFpbGVkIHRvIGxvYWQgbW9kdWxlIENyeXB0byEgUGxlYXNlIGluc3RhbGwgcHljcnlwdG9kb21lIGZpcnN0IScpXHJcblxyXG5fbG9nZ2VyID0gbG9nZ2luZy5nZXRMb2dnZXIoX19uYW1lX18pXHJcblxyXG4jIyAgIEJlZ2luIE9mIGRhdGFfdXRpbFxyXG5pbXBvcnQgb3NcclxuaW1wb3J0IHN5c1xyXG5pbXBvcnQgaGFzaGxpYlxyXG5pbXBvcnQgc3RyaW5nXHJcbmltcG9ydCByYW5kb21cclxuaW1wb3J0IGJhc2U2NFxyXG5mcm9tIGJpbmFzY2lpIGltcG9ydCBiMmFfaGV4LCBhMmJfaGV4XHJcblxyXG5mcm9tIENyeXB0byBpbXBvcnQgUmFuZG9tXHJcbmZyb20gQ3J5cHRvLkNpcGhlciBpbXBvcnQgQUVTXHJcblxyXG5fX18xID0gKCdDJykgI1x1NmI2NFx1NTkwNDE2fDI0fDMyXHU0ZTJhXHU1YjU3XHU3YjI2XHJcbl9fXzIgPSAoJ0ZTJykgI1x1NmI2NFx1NTkwNDE2fDI0fDMyXHU0ZTJhXHU1YjU3XHU3YjI2XHJcbl9fXzMgPSAoJ08nKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuX19fNCA9ICgnRicpICNcdTZiNjRcdTU5MDQxNnwyNHwzMlx1NGUyYVx1NWI1N1x1N2IyNlxyXG5fX181ID0gKCdUJykgI1x1NmI2NFx1NTkwNDE2fDI0fDMyXHU0ZTJhXHU1YjU3XHU3YjI2XHJcbl9fXzYgPSAoJ1MnKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuXHJcbl9fXzcgPSAoJ3QnKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuX19fOCA9ICgndScpICNcdTZiNjRcdTU5MDQxNnwyNHwzMlx1NGUyYVx1NWI1N1x1N2IyNlxyXG5fX185ID0gKCdkJykgI1x1NmI2NFx1NTkwNDE2fDI0fDMyXHU0ZTJhXHU1YjU3XHU3YjI2XHJcbl9fXzEwID0gKCdpJykgI1x1NmI2NFx1NTkwNDE2fDI0fDMyXHU0ZTJhXHU1YjU3XHU3YjI2XHJcbl9fXzExID0gKCdvNzInKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuX19fMTIgPSAoJzAnKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuX19fMTMgPSAoJzEnKSAjXHU2YjY0XHU1OTA0MTZ8MjR8MzJcdTRlMmFcdTViNTdcdTdiMjZcclxuXHJcbkFFU19JViA9IGInMTIzNDU2Nzg5MDEyMzQ1NidcclxuXHJcbmRlZiBnZXRfXygpOlxyXG4gICAgcmV0dXJuICcnLmpvaW4oX19fMStfX18yK19fXzMrX19fNCtfX181K19fXzYrX19fNytfX184K19fXzkrX19fMTArX19fMTErX19fMTIrX19fMTMpXHJcblxyXG4jIHBhZGRpbmdcdTdiOTdcdTZjZDVcclxuQlMgPSBsZW4oZ2V0X18oKSlcclxubXlwYWQgPSBsYW1iZGEgczogcyArIChCUyAtIGxlbihzKSAlIEJTKSAqIGNocihCUyAtIGxlbihzKSAlIEJTKVxyXG5teXVucGFkID0gbGFtYmRhIHMgOiBzWzA6LW9yZChzWy0xXSldXHJcblxyXG5jbGFzcyBBRVNDb2RlcihvYmplY3QpOlxyXG4gICAgXCJcIlwiXHJcbiAgICAgICAgXHU0ZjdmXHU3NTI4XHU3OTNhXHU0ZjhiOlxyXG4gICAgICAgIGFlc19lbmNyeXB0ID0gQUVTQ29kZXIoKVxyXG4gICAgICAgIHRleHQgPSBcInB5dGhvbiBcdTUyYTBcdTViYzZcIlxyXG4gICAgICAgIGUgPSBhZXNfZW5jcnlwdC5lbmNyeXB0KHRleHQpXHJcbiAgICAgICAgZCA9IGFlc19lbmNyeXB0LmRlY3J5cHQoZSlcclxuICAgICAgICBwcmludCB0ZXh0XHJcbiAgICAgICAgcHJpbnQgZVxyXG4gICAgICAgIHByaW50IGRcclxuXHJcbiAgICAgICAgZSA9IFwiWkJ0N0pWbzBodWJIWjVGTElobmdFYXorbjQ2dlFmSFRHeGExY0w0Q3FBOD1cIlxyXG4gICAgICAgIGQgPSBhZXNfZW5jcnlwdC5kZWNyeXB0KGUpXHJcbiAgICAgICAgcHJpbnQgZFxyXG4gICAgXCJcIlwiXHJcbiAgICBkZWYgX19pbml0X18oc2VsZiwga2V5PUZhbHNlLCBtb2RlPUFFUy5NT0RFX0NCQyk6XHJcbiAgICAgICAgc2VsZi5rZXkgPSBrZXkgb3IgZ2V0X18oKVxyXG4gICAgICAgIHNlbGYubW9kZSA9IG1vZGVcclxuICAgICAgICBzZWxmLmtleSA9IHNlbGYua2V5LmVuY29kZSgndXRmLTgnKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiBnZXRfbWFjaGluZV9jb2RlKCk6XHJcbiAgICAgICAgXCJcIlwiXHU4M2I3XHU1M2Q2XHU2NzNhXHU1NjY4XHU3ODAxXCJcIlwiXHJcbiAgICAgICAgaW1wb3J0IHV1aWRcclxuICAgICAgICByZXR1cm4gc3RyKHV1aWQuVVVJRChpbnQ9dXVpZC5nZXRub2RlKCkpKVxyXG5cclxuICAgIEBzdGF0aWNtZXRob2RcclxuICAgIGRlZiByYW5kX2Flc19rZXkoc2l6ZT0xNiwgYnlfYmFzZTY0PVRydWUsIGNoYXJzID0gc3RyaW5nLmFzY2lpX3VwcGVyY2FzZSArIHN0cmluZy5kaWdpdHMpOlxyXG4gICAgICAgIFwiXCJcIlxyXG4gICAgICAgIDpwYXJhbSBzaXplOiAgXHU3NTFmXHU2MjEwXHU5NjhmXHU2NzNhXHU1YjU3XHU3YjI2XHU0ZTMyXHU3Njg0XHU5NTdmXHU1ZWE2XHVmZjBjXHU1M2VmXHU5MDA5XHU1MDNjXHU0ZTNhMTZcdTMwMDEyNFx1MzAwMTMyXHJcbiAgICAgICAgOnBhcmFtIGNoYXJzOiAgXHU3NTFmXHU2MjEwXHU1YjU3XHU3YjI2XHU0ZTMyXHU3Njg0XHU1M2Q2XHU1MDNjXHU4MzAzXHU1NmY0XHJcbiAgICAgICAgOnBhcmFtIGJ5X2Jhc2U2NDogIFx1NjYyZlx1NTQyNlx1N2YxNlx1NzgwMVx1NGUzYWJhc2U2NFxyXG4gICAgICAgIDpyZXR1cm46XHJcbiAgICAgICAgXCJcIlwiXHJcbiAgICAgICAgcmVzID0gICcnLmpvaW4ocmFuZG9tLmNob2ljZShjaGFycykgZm9yIF8gaW4gcmFuZ2Uoc2l6ZSkpXHJcbiAgICAgICAgcmV0dXJuIGJhc2U2NC5iNjRlbmNvZGUocmVzKSBpZiBieV9iYXNlNjQgZWxzZSByZXNcclxuXHJcbiAgICAjXHU1MmEwXHU1YmM2XHU1MWZkXHU2NTcwXHJcbiAgICBkZWYgZW5jcnlwdChzZWxmLCB0ZXh0KTpcclxuICAgICAgICAjIHRleHQgPSBteXBhZCh0ZXh0KS5lbmNvZGUoJ3V0Zi04JylcclxuICAgICAgICB0ZXh0ID0gcGFkKHRleHQuZW5jb2RlKCd1dGYtOCcpLCBibG9ja19zaXplPTE2KVxyXG4gICAgICAgIF9hZXNfaXYgPSBBRVNfSVZcclxuICAgICAgICBpZiB0eXBlKEFFU19JVik9PSdzdHInOlxyXG4gICAgICAgICAgICBfYWVzX2l2ID0gQUVTX0lWLmVuY29kZShcInV0ZjhcIilcclxuXHJcbiAgICAgICAgY3J5cHRvciA9IEFFUy5uZXcoc2VsZi5rZXksIHNlbGYubW9kZSwgQUVTX0lWKVxyXG5cclxuICAgICAgICBzZWxmLmNpcGhlcnRleHQgPSBjcnlwdG9yLmVuY3J5cHQodGV4dClcclxuICAgICAgICAjQUVTXHU1MmEwXHU1YmM2XHU2NWY2XHU1MDE5XHU1Zjk3XHU1MjMwXHU3Njg0XHU1YjU3XHU3YjI2XHU0ZTMyXHU0ZTBkXHU0ZTAwXHU1YjlhXHU2NjJmYXNjaWlcdTViNTdcdTdiMjZcdTk2YzZcdTc2ODRcdWZmMGNcdThmOTNcdTUxZmFcdTUyMzBcdTdlYzhcdTdhZWZcdTYyMTZcdTgwMDVcdTRmZGRcdTViNThcdTY1ZjZcdTUwMTlcdTUzZWZcdTgwZmRcdTViNThcdTU3MjhcdTk1ZWVcdTk4OThcdWZmMGNcdTRmN2ZcdTc1MjhiYXNlNjRcdTdmMTZcdTc4MDFcclxuICAgICAgICByZXR1cm4gYmFzZTY0LmI2NGVuY29kZShzZWxmLmNpcGhlcnRleHQpXHJcblxyXG4gICAgI1x1ODllM1x1NWJjNlx1NTFmZFx1NjU3MFxyXG4gICAgZGVmIGRlY3J5cHQoc2VsZiwgdGV4dCk6XHJcbiAgICAgICAgZGVjb2RlID0gYmFzZTY0LmI2NGRlY29kZSh0ZXh0KVxyXG4gICAgICAgIGNyeXB0b3IgPSBBRVMubmV3KHNlbGYua2V5LCBzZWxmLm1vZGUsIEFFU19JVilcclxuICAgICAgICAjIHBsYWluX3RleHQgPSBjcnlwdG9yLmRlY3J5cHQoZGVjb2RlKVxyXG4gICAgICAgICMgcmV0dXJuIHBsYWluX3RleHRcclxuXHJcbiAgICAgICAgIyBwbGFpbl90ZXh0ID0gYnl0ZXMuZGVjb2RlKGNyeXB0b3IuZGVjcnlwdChkZWNvZGUpKVxyXG4gICAgICAgICMgcmV0dXJuIG15dW5wYWQocGxhaW5fdGV4dClcclxuXHJcbiAgICAgICAgcGxhaW5fdGV4dCA9IGJ5dGVzLmRlY29kZSh1bnBhZChjcnlwdG9yLmRlY3J5cHQoZGVjb2RlKSwgYmxvY2tfc2l6ZT0xNikpXHJcbiAgICAgICAgcmV0dXJuIHBsYWluX3RleHRcclxuXHJcblxyXG5mcm9tIENyeXB0byBpbXBvcnQgUmFuZG9tXHJcbmZyb20gQ3J5cHRvLkhhc2ggaW1wb3J0IFNIQVxyXG5mcm9tIENyeXB0by5DaXBoZXIgaW1wb3J0IFBLQ1MxX3YxXzUgYXMgQ2lwaGVyX3BrY3MxX3YxXzVcclxuZnJvbSBDcnlwdG8uU2lnbmF0dXJlIGltcG9ydCBQS0NTMV92MV81IGFzIFNpZ25hdHVyZV9wa2NzMV92MV81XHJcbmZyb20gQ3J5cHRvLlB1YmxpY0tleSBpbXBvcnQgUlNBXHJcblxyXG5jbGFzcyBSU0FDaXBoZXIoKTpcclxuICAgIFwiXCJcIlxyXG4gICAgUlNBXHU1MmEwXHU1YmM2XHJcbiAgICBcdTc1MWZcdTYyMTBcdTViYzZcdTk0YTVcdTViZjlcdWZmMWFcclxuICAgIHJzYSA9IFJTQUNpcGhlciggcHJpX2tleT0ncHJpLnBlbScsIHB1Yl9rZXk9J3B1Yi5wZW0nLCBrZXlfcGF0aD1cIi4vXCIpXHJcbiAgICByc2EuZ2VuX2tleV9wYWlyKClcclxuXHJcbiAgICBcdTUyYTBcdTViYzZcdWZmMWFcclxuICAgIHJzYSA9IFJTQUNpcGhlciggcHJpX2tleT0ncHJpLnBlbScsIHB1Yl9rZXk9J3B1Yi5wZW0nLCBrZXlfcGF0aD1cIi4vXCIpXHJcbiAgICBjaXBoZXJfdGV4dCA9IHJzYS5lbmNyeXB0X3N0cihcIjAwMDAwMDAwLTAwMDAtMDAwMC0wMDAwLTE4NWUwZjE3ZjIzMVwiKVxyXG5cclxuICAgIFx1ODllM1x1NWJjNlx1ZmYxYVxyXG4gICAgcnNhID0gUlNBQ2lwaGVyKCBwcmlfa2V5PSdwcmkucGVtJywgcHViX2tleT0ncHViLnBlbScsIGtleV9wYXRoPVwiLi9cIilcclxuICAgIGNpcGhlcl90ZXh0ID0gcnNhLmRlY3J5cHRfc3RyKFwialVLcTNkMTd3eDdSb1ovbWxFQkJTL01WVkxjb0k1Rld2a3NsVlVtcTFBcGdRZm54em9UMmdtanViNG1TK2YyQXBJWnhvWEtIUVFXbVlDYmdpbjVweHc9PVwiKVxyXG4gICAgXCJcIlwiXHJcblxyXG4gICAgZGVmIF9faW5pdF9fKHNlbGYsIHByaV9rZXk9J3ByaS5wZW0nLCBwdWJfa2V5PSdwdWIucGVtJywga2V5X3BhdGg9b3MucGF0aC5hYnNwYXRoKG9zLnBhdGguZGlybmFtZShfX2ZpbGVfXykpKTpcclxuICAgICAgICBzZWxmLktFWV9QUklWQVRFID0gcHJpX2tleVxyXG4gICAgICAgIHNlbGYuS0VZX1BVQkxJQyA9IHB1Yl9rZXlcclxuICAgICAgICBzZWxmLktFWV9QQVRIID0ga2V5X3BhdGhcclxuXHJcbiAgICBkZWYgZ2VuX2tleV9wYWlyKHNlbGYpOlxyXG4gICAgICAgICMgXHU0ZjJhXHU5NjhmXHU2NzNhXHU2NTcwXHU3NTFmXHU2MjEwXHU1NjY4XHJcbiAgICAgICAgcmFuZG9tX2dlbmVyYXRvciA9IFJhbmRvbS5uZXcoKS5yZWFkXHJcbiAgICAgICAgIyByc2FcdTdiOTdcdTZjZDVcdTc1MWZcdTYyMTBcdTViOWVcdTRmOGJcclxuICAgICAgICByc2EgPSBSU0EuZ2VuZXJhdGUoMTAyNCwgcmFuZG9tX2dlbmVyYXRvcilcclxuXHJcbiAgICAgICAgIyBtYXN0ZXJcdTc2ODRcdTc5ZDhcdTk0YTVcdTViZjlcdTc2ODRcdTc1MWZcdTYyMTBcclxuICAgICAgICBwcml2YXRlX3BlbSA9IHJzYS5leHBvcnRLZXkoKVxyXG5cclxuICAgICAgICB3aXRoIG9wZW4oc2VsZi5LRVlfUEFUSCArIFwiL1wiICsgc2VsZi5LRVlfUFJJVkFURSwgJ3cnKSBhcyBmOlxyXG4gICAgICAgICAgICBmLndyaXRlKHByaXZhdGVfcGVtKVxyXG5cclxuICAgICAgICBwdWJsaWNfcGVtID0gcnNhLnB1YmxpY2tleSgpLmV4cG9ydEtleSgpXHJcbiAgICAgICAgd2l0aCBvcGVuKHNlbGYuS0VZX1BBVEggKyBcIi9cIiArIHNlbGYuS0VZX1BVQkxJQywgJ3cnKSBhcyBmOlxyXG4gICAgICAgICAgICBmLndyaXRlKHB1YmxpY19wZW0pXHJcblxyXG4gICAgZGVmIGRlY3J5cHRfc3RyKHNlbGYsIGVuY3J5cHRfdGV4dCk6XHJcbiAgICAgICAgIyBcdTRmMmFcdTk2OGZcdTY3M2FcdTY1NzBcdTc1MWZcdTYyMTBcdTU2NjhcclxuICAgICAgICBfa2V5X3BhdGggPSBzZWxmLktFWV9QQVRIICsgXCIvXCIgKyBzZWxmLktFWV9QVUJMSUNcclxuICAgICAgICBpZiBub3Qgb3MucGF0aC5pc2ZpbGUoX2tleV9wYXRoKTpcclxuICAgICAgICAgICAgcmFpc2UgRXhjZXB0aW9uKFwiRGVjcnlwdCBrZXkgbm90IGV4aXN0IG9yIGludmFsaWQhXCIpXHJcblxyXG4gICAgICAgIHJhbmRvbV9nZW5lcmF0b3IgPSBSYW5kb20ubmV3KCkucmVhZFxyXG4gICAgICAgIHdpdGggb3BlbihzZWxmLktFWV9QQVRIICsgXCIvXCIgKyBzZWxmLktFWV9QUklWQVRFKSBhcyBmOlxyXG4gICAgICAgICAgICBrZXkgPSBmLnJlYWQoKVxyXG4gICAgICAgICAgICByc2FrZXkgPSBSU0EuaW1wb3J0S2V5KGtleSlcclxuICAgICAgICAgICAgY2lwaGVyID0gQ2lwaGVyX3BrY3MxX3YxXzUubmV3KHJzYWtleSlcclxuICAgICAgICAgICAgcGxhaW5fdGV4dCA9IGNpcGhlci5kZWNyeXB0KGJhc2U2NC5iNjRkZWNvZGUoZW5jcnlwdF90ZXh0KSwgcmFuZG9tX2dlbmVyYXRvcilcclxuICAgICAgICAgICAgcmV0dXJuIHBsYWluX3RleHRcclxuXHJcbiAgICBkZWYgZW5jcnlwdF9zdHIoc2VsZiwgbWVzc2FnZSk6XHJcbiAgICAgICAgX2tleV9wYXRoID0gc2VsZi5LRVlfUEFUSCArIFwiL1wiICsgc2VsZi5LRVlfUFVCTElDXHJcbiAgICAgICAgaWYgbm90IG9zLnBhdGguaXNmaWxlKF9rZXlfcGF0aCk6XHJcbiAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbihcIkVuY3J5cHQga2V5IG5vdCBleGlzdCBvciBpbnZhbGlkIVwiKVxyXG5cclxuICAgICAgICB3aXRoIG9wZW4oX2tleV9wYXRoKSBhcyBmOlxyXG4gICAgICAgICAgICBrZXkgPSBmLnJlYWQoKVxyXG4gICAgICAgICAgICByc2FrZXkgPSBSU0EuaW1wb3J0S2V5KGtleSlcclxuICAgICAgICAgICAgY2lwaGVyID0gQ2lwaGVyX3BrY3MxX3YxXzUubmV3KHJzYWtleSlcclxuICAgICAgICAgICAgY2lwaGVyX3RleHQgPSBiYXNlNjQuYjY0ZW5jb2RlKGNpcGhlci5lbmNyeXB0KG1lc3NhZ2UpKVxyXG4gICAgICAgICAgICByZXR1cm4gY2lwaGVyX3RleHRcclxuIyMgICAgRW5kIE9mIGRhdGFfdXRpbFxyXG5cclxuXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjI1xyXG4jI1xyXG4jIyAgXHU2M2E1XHU0ZTBiXHU2NzY1XHU3Njg0XHU2MDFkXHU4ZGVmXHVmZjFhXHJcbiMjICAxXHUzMDAxXHU1NzI4XHU1MmE4XHU2MDAxXHU3NTFmXHU2MjEwXHU3Njg0XHU2YTIxXHU2NzdmXHU0ZTJkXHU2NTNlXHU0ZTAwXHU0ZTJhdC1lc2NcdTY4MDdcdTdiN2VcclxuIyMgIDJcdTMwMDFcdTdlZTdcdTYyN2YgX2luaGVyaXQgPSBcInJlcG9ydFwiXHVmZjBjXHU3ZWU3XHU2MjdmIGRlZiByZW5kZXIoc2VsZiwgdGVtcGxhdGUsIHZhbHVlcz1Ob25lKSBcdTY1YjlcdTZjZDVcdWZmMGNcclxuIyMgICAgIFx1NTcyOFx1OGJlNVx1NjViOVx1NmNkNVx1NGUyZFx1NjJmY1x1NjU3MFx1NjM2ZWpzb25cdWZmMGNcdTcxMzZcdTU0MGVcdTc1MzFcdTZlMzJcdTY3ZDNcdTVmMTVcdTY0Y2VcdTZlMzJcdTY3ZDNcdTUyMzBodG1sXHU0ZTJkXHJcbiMjXHJcbiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyNcclxuXHJcblJFUE9SVF9GSUxFX1BFUkZJWCA9IFwicmVwb3J0X1wiXHJcblJFUE9SVF9OQU1FX1BFUkZJWCA9IFwicmVwb3J0X1wiXHJcblJFUE9SVF9JRF9QRVJGSVggPSBcInJlcG9ydF9cIlxyXG5cclxuY2xhc3MgQ0ZQcmludExpY2Vuc2UobW9kZWxzLk1vZGVsKTpcclxuICAgIF9uYW1lID0gJ2NmLmNmcHJpbnQubGljZW5zZSdcclxuICAgIF9kZXNjcmlwdGlvbiA9ICdcdThiYjhcdTUzZWZcdThiYzFcdTRmZTFcdTYwNmYnXHJcblxyXG4gICAgbWNvZGUgPSBmaWVsZHMuQ2hhcihzdHJpbmc9J1x1NjczYVx1NTY2OFx1NzgwMScsIGRlZmF1bHQ9bGFtYmRhIHg6IEFFU0NvZGVyLmdldF9tYWNoaW5lX2NvZGUoKSwgaGVscD0nXHU2NzBkXHU1MmExXHU1NjY4XHU2NzNhXHU1NjY4XHU3ODAxJylcclxuICAgIGxpY2Vuc2UgPSBmaWVsZHMuQmluYXJ5KHN0cmluZz0nXHU4YmI4XHU1M2VmXHU4YmMxJywgaGVscD0nXHU2Mzg4XHU2NzQzXHU4YmI4XHU1M2VmXHU4YmMxXHU2NTg3XHU0ZWY2XHVmZjBjXHU0ZTBiXHU4ZjdkXHU1NDBlXHU2NTM5XHU1NDBkXHU0ZTNhY2ZwcmludC5saWNcdTY1M2VcdTUyMzBcdTViYTJcdTYyMzdcdTdhZWZjZnByaW50XHU3NmVlXHU1ZjU1XHU0ZTBiXHUzMDAyJylcclxuICAgIG5vdGUgPSBmaWVsZHMuQ2hhcihzdHJpbmc9J1x1NTkwN1x1NmNlOCcpXHJcblxyXG4gICAgQGFwaS5tb2RlbFxyXG4gICAgZGVmIGNyZWF0ZV9vcl9zaG93X2xpY2Vuc2Uoc2VsZik6XHJcbiAgICAgICAgbWNvZGUgPSBBRVNDb2Rlci5nZXRfbWFjaGluZV9jb2RlKClcclxuICAgICAgICBsaWMgPSBzZWxmLnNlYXJjaChbKCdtY29kZScsICc9JywgbWNvZGUpXSwgbGltaXQ9MSlcclxuICAgICAgICBpZiBub3QgbGljOlxyXG4gICAgICAgICAgICBsaWMgPSBzZWxmLmNyZWF0ZSh7XCJtY29kZVwiOiBtY29kZSwgXCJub3RlXCI6IFwiXHU1ZWI3XHU4NjRlXHU0ZTkxXHU2MmE1XHU4ODY4XHU1MTRkXHU1MTk5XHU0ZWUzXHU3ODAxXHU2YTIxXHU1NzU3XHU4YmI4XHU1M2VmXHU4YmMxXCJ9KVxyXG4gICAgICAgIGFjdGlvbiA9IHtcclxuICAgICAgICAgICAgJ3R5cGUnOiAnaXIuYWN0aW9ucy5hY3Rfd2luZG93JyxcclxuICAgICAgICAgICAgJ25hbWUnOiBfKCdcdTYyNTNcdTUzNzBcdTY3MGRcdTUyYTFcdTU2NjhcdTU3MzBcdTU3NDAnKSxcclxuICAgICAgICAgICAgJ3ZpZXdfbW9kZSc6ICdmb3JtJyxcclxuICAgICAgICAgICAgJ3ZpZXdfdHlwZSc6ICdmb3JtJyxcclxuICAgICAgICAgICAgJ3Jlc19tb2RlbCc6ICdjZi5jZnByaW50LmxpY2Vuc2UnLFxyXG4gICAgICAgICAgICAnbm9kZXN0cm95JzogJ3RydWUnLFxyXG4gICAgICAgICAgICAncmVzX2lkJzogbGljLmlkLFxyXG4gICAgICAgICAgICAndmlld3MnOiBbKEZhbHNlLCAnZm9ybScpXSxcclxuICAgICAgICAgICAgIyAndmlld19pZCc6IHNlbGYuZW52LnJlZihcImNmcHJpbnQuY2ZfcHJpbnRfc2VydmVyX21hcHBpbmdfZm9ybVwiKSxcclxuICAgICAgICAgICAgJ3RhcmdldCc6ICdjdXJyZW50JywgICMnbmV3JyxcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFjdGlvblxyXG5cclxuICAgIEBhcGkubW9kZWxcclxuICAgIGRlZiBjcmVhdGUoc2VsZiwgdmFscyk6XHJcbiAgICAgICAgdmFsc1snbWNvZGUnXSA9IG1hY2hpbmVfY29kZSA9IEFFU0NvZGVyLmdldF9tYWNoaW5lX2NvZGUoKSBvciAnJyAgI0dldCBtYWNoaW5lIGNvZGVcclxuICAgICAgICByZXR1cm4gc3VwZXIoQ0ZQcmludExpY2Vuc2UsIHNlbGYpLmNyZWF0ZSh2YWxzKVxyXG5cclxuICAgICMgQGFwaS5tdWx0aVxyXG4gICAgZGVmIHdyaXRlKHNlbGYsIHZhbHMpOlxyXG4gICAgICAgIHZhbHNbJ21jb2RlJ10gPSBtYWNoaW5lX2NvZGUgPSBBRVNDb2Rlci5nZXRfbWFjaGluZV9jb2RlKCkgb3IgJycgICNHZXQgbWFjaGluZSBjb2RlXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyKENGUHJpbnRMaWNlbnNlLCBzZWxmKS53cml0ZSh2YWxzKVxyXG5cclxuICAgICMgQGFwaS5tdWx0aVxyXG4gICAgZGVmIG5hbWVfZ2V0KHNlbGYpOlxyXG4gICAgICAgIHJldHVybiBbKHJlY29yZC5pZCwgXCJcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdThiYjhcdTUzZWZcdThiYzFcIiApIGZvciByZWNvcmQgaW4gc2VsZl1cclxuXHJcbmNsYXNzIElyTW9kZWwobW9kZWxzLk1vZGVsKTpcclxuICAgIF9pbmhlcml0ID0gJ2lyLm1vZGVsJ1xyXG5cclxuICAgIGRlZiBuYW1lX2dldChzZWxmKTpcclxuICAgICAgICByZXR1cm4gWyhtb2RlbC5pZCwgJyVzKCVzKScgJSAobW9kZWwubmFtZSwgbW9kZWwubW9kZWwpKSBmb3IgbW9kZWwgIGluIHNlbGZdXHJcblxyXG5jbGFzcyBDRlJlcG9ydENhdGVnb3J5KG1vZGVscy5Nb2RlbCk6XHJcbiAgICBfbmFtZSA9ICdjZi5yZXBvcnQuZGVmaW5lLmNhdGVnb3J5J1xyXG4gICAgX2Rlc2NyaXB0aW9uID0gJ1x1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVx1N2M3Ylx1NTIyYidcclxuXHJcbiAgICBuYW1lID0gZmllbGRzLkNoYXIoc3RyaW5nPVwiXHU3YzdiXHU1MjJiXHU1NDBkXHU3OWYwXCIsIHJlcXVpcmVkPVRydWUsIGhlbHA9XCJcdTRlM2FcdTRmYmZcdTRlOGVcdTdiYTFcdTc0MDZcdWZmMGNcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcdThmZGJcdTg4NGNcdTUyMDZcdTdjN2JcdTMwMDJcdTllZDhcdThiYTRcdTY2MmZcdTIwMWNcdTY3MmFcdTUyMDZcdTdjN2JcdTIwMWRcdTMwMDJcIilcclxuICAgIGxpbmVzID0gZmllbGRzLk9uZTJtYW55KFwiY2YucmVwb3J0LmRlZmluZVwiLCBcImNhdGVnb3J5X2lkXCIsIHN0cmluZz1cIlx1NjJhNVx1ODg2OFwiKVxyXG4gICAgbm90ZSA9IGZpZWxkcy5UZXh0KHN0cmluZz1cIlx1NTkwN1x1NmNlOFwiKVxyXG5cclxuY2xhc3MgQ0ZSZXBvcnRQcmludGVyKG1vZGVscy5Nb2RlbCk6XHJcbiAgICBfbmFtZSA9ICdjZi5yZXBvcnQucHJpbnRlcidcclxuICAgIF9kZXNjcmlwdGlvbiA9ICdcdTYyNTNcdTUzNzBcdTY3M2FcdTU0MGRcdTc5ZjAnXHJcblxyXG4gICAgbmFtZSA9IGZpZWxkcy5DaGFyKHN0cmluZz1cIlx1NjI1M1x1NTM3MFx1NjczYVx1NTQwZFx1NzlmMFwiLCByZXF1aXJlZD1UcnVlLCBoZWxwPVwiXHU2MmE1XHU4ODY4XHU2MjUzXHU1MzcwXHU4OTgxXHU0ZjdmXHU3NTI4XHU3Njg0XHU1YmEyXHU2MjM3XHU3YWVmXHU2MjUzXHU1MzcwXHU2NzNhXHU1NDBkXHU3OWYwXHVmZjBjXHU0ZTBkXHU4YmJlXHU3ZjZlXHU1MjE5XHU0ZjdmXHU3NTI4XHU5ZWQ4XHU4YmE0XHU2MjUzXHU1MzcwXHU2NzNhXHUzMDAyXFxuXHU1OTgyXHU2NzljXHU0ZTBkXHU2ZTA1XHU2OTVhXHU2MjUzXHU1MzcwXHU2NzNhXHU1NDBkXHU3OWYwXHVmZjBjXHU4YmY3XHU0ZTBkXHU4OTgxXHU1ODZiXHU1MTk5XHVmZjAxXCIpXHJcbiAgICBub3RlID0gZmllbGRzLlRleHQoc3RyaW5nPVwiXHU1OTA3XHU2Y2U4XCIpXHJcblxyXG5jbGFzcyBDRlJlcG9ydERlZmluZShtb2RlbHMuTW9kZWwpOlxyXG4gICAgX25hbWUgPSAnY2YucmVwb3J0LmRlZmluZSdcclxuICAgIF9kZXNjcmlwdGlvbiA9ICdcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDknXHJcblxyXG4gICAgZGVmIF9jb21wdXRlX3RlY2huaWNhbF9uYW1lKHNlbGYpOlxyXG4gICAgICAgIGZvciByZWMgaW4gc2VsZjpcclxuICAgICAgICAgICAgcmVjLnRlY2huaWNhbF9uYW1lID0gcmVjLl9nZXRfcmVwb3J0X25hbWUoKVxyXG5cclxuICAgIG5hbWUgPSBmaWVsZHMuQ2hhcihzdHJpbmc9J1x1NjJhNVx1ODg2OElEJywgcmVxdWlyZWQ9VHJ1ZSwgY29weT1UcnVlLCBoZWxwPVwiXHU3NTI4XHU0ZTAwXHU3ODZlXHU1YjlhXHU2MmE1XHU4ODY4XHU3Njg0XHU1NTJmXHU0ZTAwSURcdWZmMGNcdTUzZWFcdTUxNDFcdThiYjhcdTgyZjFcdTY1ODdcdTMwMDFcdTY1NzBcdTViNTdcdTU0OGNcdTRlMGJcdTUyMTJcdTdlYmZcdTMwMDJcIilcclxuICAgIGNvbW1lbnQgPSBmaWVsZHMuQ2hhcihzdHJpbmc9J1x1NjJhNVx1ODg2OFx1NGUyZFx1NjU4N1x1NTQwZFx1NzlmMCcsIHJlcXVpcmVkPVRydWUsIGNvcHk9VHJ1ZSlcclxuICAgIHRlY2huaWNhbF9uYW1lID0gZmllbGRzLkNoYXIoc3RyaW5nPVwiXHU2MjgwXHU2NzJmXHU1NDBkXHU3OWYwXCIsIHJlYWRvbmx5PVRydWUsIGNvbXB1dGU9XCJfY29tcHV0ZV90ZWNobmljYWxfbmFtZVwiLCBoZWxwPVwiXHU2MmE1XHU4ODY4XHU3Njg0XHU2MjgwXHU2NzJmXHU1NDBkXHU3OWYwXHVmZjBjXHU0ZTNiXHU4OTgxXHU3NTI4XHU0ZThlXHU1MTc2XHU0ZWQ2XHU1NzMwXHU2NWI5XHU3NmY0XHU2M2E1XHU4YzAzXHU3NTI4XHU2MmE1XHU4ODY4XHUzMDAyXCIpXHJcbiAgICBtb2RlbF9pZCA9IGZpZWxkcy5NYW55Mm9uZSgnaXIubW9kZWwnLCBzdHJpbmc9J1x1NjU3MFx1NjM2ZVx1ODg2OChtb2RlbCknLCByZXF1aXJlZD1UcnVlLCBjb3B5PVRydWUsIG9uZGVsZXRlPVwiY2FzY2FkZVwiLCBoZWxwPVwiXHU2MmE1XHU4ODY4XHU1YmY5XHU1ZTk0XHU3Njg0XHU2NTcwXHU2MzZlXHU4ODY4KG1vZGVsKVwiKVxyXG4gICAgdGVtcGxhdGVfaWQgPSBmaWVsZHMuTWFueTJvbmUoJ2NmLnRlbXBsYXRlJywgc3RyaW5nPSdcdTYyYTVcdTg4NjhcdTZhMjFcdTY3N2YnLCBjb3B5PVRydWUsIGhlbHA9XCJcdThiZTVcdTYyYTVcdTg4NjhcdTRmN2ZcdTc1MjhcdTc2ODRcdTYyNTNcdTUzNzBcdTZhMjFcdTY3N2ZcdTMwMDJcXG5cdTZhMjFcdTY3N2ZcdTU5ODJcdTY3OWNcdTVjMWFcdTY3MmFcdThiYmVcdThiYTFcdWZmMGNcdTUzZWZcdTRlZTVcdTUxNDhcdTUyMWJcdTVlZmFcdTRlMDBcdTRlMmFcdTZhMjFcdTY3N2ZcdTViOWFcdTRlNDlcdWZmMGNcdTVmODVcdTc1MWZcdTYyMTBcdTY1NzBcdTYzNmVcdTVlNzZcdThiYmVcdThiYTFcdTYyYTVcdTg4NjhcdTZhMjFcdTY3N2ZcdTU0MGVcdTUxOGRcdTRlMGFcdTRmMjBcdTUyMzBcdTZhMjFcdTY3N2ZcdTVlOTNcdTMwMDJcIilcclxuICAgIGNvbXBhbnlfaWQgPSBmaWVsZHMuTWFueTJvbmUoJ3Jlcy5jb21wYW55Jywgc3RyaW5nPSdcdTYyNDBcdTVjNWVcdTUxNmNcdTUzZjgnLCBkZWZhdWx0PWxhbWJkYSBzZWxmOiBzZWxmLmVudlsncmVzLmNvbXBhbnknXS5fY29tcGFueV9kZWZhdWx0X2dldCgnJykpXHJcbiAgICBvcGVuX3ByaW50ID0gZmllbGRzLkJvb2xlYW4oc3RyaW5nPVwiXHU2NjJmXHU1NDI2XHU1ZjM5XHU1MWZhXHU2MjUzXHU1MzcwXCIsIGRlZmF1bHQ9RmFsc2UpXHJcbiAgICBoaWRlX3ByaW50X21lbnUgPSBmaWVsZHMuQm9vbGVhbihzdHJpbmc9XCJcdTk2OTBcdTg1Y2ZcdTYyNTNcdTUzNzBcdTgzZGNcdTUzNTVcIiwgZGVmYXVsdD1GYWxzZSwgaGVscD1cIlx1NjYyZlx1NTQyNlx1OTY5MFx1ODVjZlx1NjI1M1x1NTM3MFx1ODNkY1x1NTM1NVx1MzAwMlx1NTk4Mlx1Njc5Y1x1OTY5MFx1ODVjZlx1ZmYwY1x1NTIxOVx1OTcwMFx1ODk4MVx1OTAxYVx1OGZjN1x1NGU4Y1x1NmIyMVx1NWYwMFx1NTNkMVx1Njc2NVx1NTIxYlx1NWVmYVx1ODNkY1x1NTM1NVx1NjIxNlx1NjMwOVx1OTRhZVx1OGMwM1x1NzUyOFx1NjJhNVx1ODg2OFx1MzAwMlwiKVxyXG4gICAgdXNlX2NsaWVudF90ZW1wbCA9IGZpZWxkcy5Cb29sZWFuKHN0cmluZz1cIlx1NGY3Zlx1NzUyOFx1NWJhMlx1NjIzN1x1N2FlZlx1NmEyMVx1Njc3ZlwiLCAgZGVmYXVsdD1GYWxzZSwgaGVscD1cIlx1NjI1M1x1NTM3MFx1NjVmNlx1NGY3Zlx1NzUyOFx1NGZkZFx1NWI1OFx1NTcyOFx1NjI1M1x1NTM3MFx1NWJhMlx1NjIzN1x1N2FlZlx1NzY4NFx1NjI1M1x1NTM3MFx1NmEyMVx1Njc3Zlx1MzAwMlx1NTk4Mlx1Njc5Y1x1NjYyZlx1ZmYwY1x1NTIxOVx1OTcwMFx1ODk4MVx1OGY5M1x1NTE2NWNsaWVudF90ZW1wbF9uYW1lXCIpXHJcbiAgICBjbGllbnRfdGVtcGxfbmFtZSA9IGZpZWxkcy5DaGFyKHN0cmluZz1cIlx1NWJhMlx1NjIzN1x1N2FlZlx1NmEyMVx1Njc3Zlx1NjU4N1x1NGVmNlx1NTQwZFwiLCBoZWxwPVwiXHU1OTgyXHU2NzljXHU4YmJlXHU3ZjZlXHU0ZTg2XHU0ZjdmXHU3NTI4XHU1YmEyXHU2MjM3XHU3YWVmXHU2YTIxXHU2NzdmXHVmZjBjXHU1MjE5XHU1NzI4XHU2YjY0XHU1ZjU1XHU1MTY1XHU1YmEyXHU2MjM3XHU3YWVmXHU2YTIxXHU2NzdmXHU4ZGVmXHU1Zjg0XHU1NDhjXHU2NTg3XHU0ZWY2XHU1NDBkXCIpXHJcbiAgICBmaWVsZF9pZHMgPSBmaWVsZHMuT25lMm1hbnkoXCJjZi5yZXBvcnQuZGVmaW5lLmZpZWxkXCIsIFwicmVwb3J0X2lkXCIsIGRvbWFpbj1sYW1iZGEgc2VsZjogWygnbW9kZWxfaWQnLCAnPScsIHNlbGYubW9kZWxfaWQuaWQpXSwgc3RyaW5nPVwiXHU1YjU3XHU2YmI1XCIsIGhlbHA9XCJcdTg5ODFcdTU3MjhcdTYyYTVcdTg4NjhcdTZhMjFcdTY3N2ZcdTRlMmRcdTRmN2ZcdTc1MjhcdTc2ODRcdTViNTdcdTZiYjVcdTRmZTFcdTYwNmZcIilcclxuICAgIHBybl9zZXJ2ZXJfYWRkcmVzcyA9IGZpZWxkcy5DaGFyKHN0cmluZz1cIlx1NjI1M1x1NTM3MFx1NjcwZFx1NTJhMVx1NTY2OFx1NTczMFx1NTc0MFwiLCBkZWZhdWx0PVwiMTI3LjAuMC4xXCIsIGhlbHA9XCJcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdTYyNTNcdTUzNzBcdTY3MGRcdTUyYTFcdTU2NjhcdTU3MzBcdTU3NDBcdWZmMGNcdTllZDhcdThiYTRcdTY2MmYxMjcuMC4wLjFcdTMwMDJcXG5cdTU5ODJcdTY3OWNcdTRlMGRcdTZlMDVcdTY5NWFcdThiZTVcdTUzYzJcdTY1NzBcdTc2ODRcdTU0MmJcdTRlNDlcdWZmMGNcdThiZjdcdTUyZmZcdTRmZWVcdTY1MzlcdThiZTVcdTUzYzJcdTY1NzBcdWZmMDFcIilcclxuICAgIHBybl9zZXJ2ZXJfcG9ydCA9IGZpZWxkcy5JbnRlZ2VyKHN0cmluZz1cIlx1NjI1M1x1NTM3MFx1NjcwZFx1NTJhMVx1NTY2OFx1N2FlZlx1NTNlM1wiLCBkZWZhdWx0PVwiNTQzMjFcIiwgaGVscD1cIlx1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2OFx1NjI1M1x1NTM3MFx1NjcwZFx1NTJhMVx1NTY2OFx1N2FlZlx1NTNlM1x1ZmYwY1x1OWVkOFx1OGJhNFx1NjYyZjU0MzIxXHUzMDAyXFxuXHU1OTgyXHU2NzljXHU0ZTBkXHU2ZTA1XHU2OTVhXHU4YmU1XHU1M2MyXHU2NTcwXHU3Njg0XHU1NDJiXHU0ZTQ5XHVmZjBjXHU4YmY3XHU1MmZmXHU0ZmVlXHU2NTM5XHU4YmU1XHU1M2MyXHU2NTcwXHVmZjAxXCIpXHJcbiAgICBwcmludGVyX2lkID0gZmllbGRzLk1hbnkyb25lKFwiY2YucmVwb3J0LnByaW50ZXJcIiwgc3RyaW5nPVwiXHU2MjUzXHU1MzcwXHU2NzNhXCIsIGhlbHA9XCJcdTg5ODFcdTRmN2ZcdTc1MjhcdTc2ODRcdTYyNTNcdTUzNzBcdTY3M2FcdWZmMGNcdTc1NTlcdTdhN2FcdTUyMTlcdTRmN2ZcdTc1MjhcdTllZDhcdThiYTRcdTYyNTNcdTUzNzBcdTY3M2FcIilcclxuICAgIGNhdGVnb3J5X2lkID0gZmllbGRzLk1hbnkyb25lKFwiY2YucmVwb3J0LmRlZmluZS5jYXRlZ29yeVwiLCBzdHJpbmc9XCJcdTYyYTVcdTg4NjhcdTUyMDZcdTdjN2JcIiwgaGVscD1cIlx1NjJhNVx1ODg2OFx1N2M3Ylx1NTIyYlx1ZmYwY1x1OWVkOFx1OGJhNFx1NGUzYVx1NjcyYVx1NTIwNlx1N2M3YlwiKSAjLCBkZWZhdWx0PWxhbWJkYSBzZWxmOiBzZWxmLmVudi5yZWYoJ2NmcHJpbnQuY2ZfcmVwb3J0X2RlZmluZV9jYXRlZ29yeV9jb21tb24nKVxyXG4gICAgYmFja19hZnRlcl9wcmludCA9IGZpZWxkcy5Cb29sZWFuKHN0cmluZz1cIlx1NjI1M1x1NTM3MFx1NTQwZVx1OGZkNFx1NTZkZVwiLCBkZWZhdWx0PUZhbHNlLCBoZWxwPVwiXHU2MjUzXHU1MzcwXHU4YmY3XHU2YzQyXHU1M2QxXHU5MDAxXHU1MjMwXHU2MjUzXHU1MzcwXHU0ZjNhXHU2NzBkXHU1NjY4XHU1NDBlXHU4ZmQ0XHU1NmRlXHU1MjRkXHU5ODc1XCIpXHJcbiAgICBzdGF0ZSA9IGZpZWxkcy5TZWxlY3Rpb24oWygnZHJhZnQnLCAnXHU4MzQ5XHU3YTNmJyksICgnZGVmaW5lZCcsICdcdTViOGNcdTYyMTBcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDknKV0sIHN0cmluZz1cIlx1NzJiNlx1NjAwMVwiLCBkZWZhdWx0PVwiZHJhZnRcIilcclxuICAgIG5vdGUgPSBmaWVsZHMuVGV4dChzdHJpbmc9XCJcdTU5MDdcdTZjZThcIilcclxuXHJcbiAgICBfc3FsX2NvbnN0cmFpbnRzID0gW1xyXG4gICAgICAgICgndW5pcV9uYW1lJywgJ3VuaXF1ZShuYW1lKScsIF8oJ1x1NjJhNVx1ODg2OFx1NTQwZFx1NzlmMFx1NWZjNVx1OTg3Ylx1NTUyZlx1NGUwMCEnKSksXHJcbiAgICBdXHJcblxyXG4gICAgQGFwaS5tb2RlbFxyXG4gICAgZGVmIGNyZWF0ZShzZWxmLCB2YWxzKTpcclxuICAgICAgICBpZiBub3QgdmFscy5nZXQoXCJ0ZW1wbGF0ZV9pZFwiLCBGYWxzZSk6XHJcbiAgICAgICAgICAgIF9uYW1lID0gdmFscy5nZXQoXCJuYW1lXCIsIEZhbHNlKVxyXG4gICAgICAgICAgICBfY29tbWVudCA9IHZhbHMuZ2V0KFwiY29tbWVudFwiLCBGYWxzZSlcclxuICAgICAgICAgICAgaWYgbm90IF9uYW1lOlxyXG4gICAgICAgICAgICAgICAgcmFpc2UgVmFsaWRhdGlvbkVycm9yKF8oXCJcdThiZjdcdTUxNDhcdTYzMDdcdTViOWFcdTYyYTVcdTg4NjhJRFx1ZmYwMVwiKSlcclxuICAgICAgICAgICAgY2ZfdGVtcGxfaWQgPSBcImNmX3RlbXBsXyVzXCIgJSAoUkVQT1JUX05BTUVfUEVSRklYLCBfbmFtZS5yZXBsYWNlKCcuJywgJ18nKSlcclxuICAgICAgICAgICAgY2ZfdGVtcGwgPSBzZWxmLmVudltcImNmLnRlbXBsYXRlXCJdLnNlYXJjaChbKCd0ZW1wbF9pZCcsICc9JywgY2ZfdGVtcGxfaWQpXSwgbGltaXQ9MSlcclxuICAgICAgICAgICAgaWYgbm90IGNmX3RlbXBsOlxyXG4gICAgICAgICAgICAgICAgY2ZfdGVtcGwgPSBzZWxmLmVudltcImNmLnRlbXBsYXRlXCJdLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgXCJ0ZW1wbF9pZFwiOiBjZl90ZW1wbF9pZCxcclxuICAgICAgICAgICAgICAgICAgICBcIm5hbWVcIjogKF9jb21tZW50IG9yIGNmX3RlbXBsX2lkKSArIFwiXHU2MjUzXHU1MzcwXHU2YTIxXHU2NzdmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiAoX2NvbW1lbnQgb3IgY2ZfdGVtcGxfaWQpICsgXCJcdTYyNTNcdTUzNzBcdTZhMjFcdTY3N2ZcIixcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIHZhbHNbXCJ0ZW1wbGF0ZV9pZFwiXSA9IGNmX3RlbXBsLmlkXHJcblxyXG4gICAgICAgIHJldHVybiBzdXBlcihDRlJlcG9ydERlZmluZSwgc2VsZikuY3JlYXRlKHZhbHMpXHJcblxyXG4gICAgIyBAYXBpLm11bHRpXHJcbiAgICBkZWYgdW5saW5rKHNlbGYpOlxyXG4gICAgICAgIGZvciBycHQgaW4gc2VsZjpcclxuICAgICAgICAgICAgcnB0Ll9yZW1vdmVfcmVwb3J0KClcclxuICAgICAgICByZXR1cm4gc3VwZXIoQ0ZSZXBvcnREZWZpbmUsIHNlbGYpLnVubGluaygpXHJcblxyXG4gICAgZGVmIF9nZXRfcmVwb3J0X2lkKHNlbGYpOlxyXG4gICAgICAgIHNlbGYuZW5zdXJlX29uZSgpXHJcbiAgICAgICAgcmV0dXJuIFwiJXMlc1wiICUgKFJFUE9SVF9JRF9QRVJGSVgsIHNlbGYubmFtZSlcclxuXHJcbiAgICBkZWYgX2dldF9yZXBvcnRfbmFtZShzZWxmLCB3aXRoX21vZHVsZT1UcnVlKTpcclxuICAgICAgICBzZWxmLmVuc3VyZV9vbmUoKVxyXG4gICAgICAgIGlmIHdpdGhfbW9kdWxlOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJjZl9yZXBvcnRfZGVzaWduZXIuJXMlc1wiICUgKFJFUE9SVF9OQU1FX1BFUkZJWCwgc2VsZi5uYW1lLnJlcGxhY2UoJy4nLCAnXycpIGlmIHNlbGYubmFtZSBlbHNlIFwiXCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiJXMlc1wiICUgKFJFUE9SVF9OQU1FX1BFUkZJWCwgc2VsZi5uYW1lLnJlcGxhY2UoJy4nLCAnXycpIGlmIHNlbGYubmFtZSBlbHNlIFwiXCIpXHJcblxyXG4gICAgZGVmIF9nZXRfcmVwb3J0X2ZpbGUoc2VsZiwgd2l0aF9tb2R1bGU9VHJ1ZSk6XHJcbiAgICAgICAgc2VsZi5lbnN1cmVfb25lKClcclxuICAgICAgICBpZiB3aXRoX21vZHVsZTpcclxuICAgICAgICAgICAgcmV0dXJuIFwiY2ZfcmVwb3J0X2Rlc2lnbmVyLiVzJXNcIiAlIChSRVBPUlRfRklMRV9QRVJGSVgsIHNlbGYubmFtZS5yZXBsYWNlKCcuJywgJ18nKSlcclxuICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICByZXR1cm4gXCIlcyVzXCIgJSAoUkVQT1JUX0ZJTEVfUEVSRklYLCBzZWxmLm5hbWUucmVwbGFjZSgnLicsICdfJykpXHJcblxyXG4gICAgIyBAYXBpLm9uZVxyXG4gICAgZGVmIF9yZW1vdmVfcmVwb3J0KHNlbGYpOlxyXG4gICAgICAgIHJlcG9ydF9pZCA9IHNlbGYuX2dldF9yZXBvcnRfaWQoKVxyXG4gICAgICAgIHJlcG9ydF9uYW1lID0gc2VsZi5fZ2V0X3JlcG9ydF9uYW1lKClcclxuICAgICAgICByZXBvcnRfZmlsZSA9IHNlbGYuX2dldF9yZXBvcnRfZmlsZSgpXHJcblxyXG4gICAgICAgICMgXHU1MjIwXHU5NjY0XHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5XHJcbiAgICAgICAgc2VsZi5lbnZbXCJpci5tb2RlbC5kYXRhXCJdLnN1ZG8oKS5zZWFyY2goWygnbmFtZScsICc9JywgcmVwb3J0X2lkKV0pLnVubGluaygpXHJcbiAgICAgICAgIyBzZWxmLmVudlsnaXIudmFsdWVzJ10uc3VkbygpLnNlYXJjaChbKCduYW1lJywgJz0nLCByZXBvcnRfaWQpXSkudW5saW5rKClcclxuICAgICAgICByZXBvcnRzID0gc2VsZi5lbnZbJ2lyLmFjdGlvbnMucmVwb3J0J10uc3VkbygpLnNlYXJjaChbKCdyZXBvcnRfbmFtZScsICc9JywgcmVwb3J0X25hbWUpXSlcclxuICAgICAgICBmb3IgcnB0IGluIHJlcG9ydHM6XHJcbiAgICAgICAgICAgIHJwdC51bmxpbmtfYWN0aW9uKClcclxuICAgICAgICAgICAgcnB0LnVubGluaygpXHJcblxyXG4gICAgICAgICMgXHU1MjIwXHU5NjY0XHU2YTIxXHU2NzdmXHJcbiAgICAgICAgc2VsZi5lbnZbJ2lyLnVpLnZpZXcnXS5zZWFyY2goWygna2V5JywgJz0nLCByZXBvcnRfbmFtZSldKS51bmxpbmsoKVxyXG5cclxuICAgICAgICAjICMgXHU1MjIwXHU5NjY0XHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5XHJcbiAgICAgICAgIyBzZWxmLmVudltcImlyLm1vZGVsLmRhdGFcIl0uc2VhcmNoKFsoJ25hbWUnLCAnPScsIHJlcG9ydF9pZCldKS51bmxpbmsoKVxyXG4gICAgICAgICMgc2VsZi5lbnZbJ2lyLmFjdGlvbnMucmVwb3J0J10uc2VhcmNoKFsoJ3JlcG9ydF9uYW1lJywgJz0nLCByZXBvcnRfbmFtZSksICgnY2ZfcmVwb3J0X2RlZmluZV9pZCcsICchPScsIEZhbHNlKV0pLnVubGluaygpXHJcbiAgICAgICAgI1xyXG4gICAgICAgICMgIyBcdTUyMjBcdTk2NjRcdTZhMjFcdTY3N2ZcclxuICAgICAgICAjIHNlbGYuZW52Wydpci51aS52aWV3J10uc2VhcmNoKFsoJ2tleScsICc9JywgcmVwb3J0X25hbWUpXSkudW5saW5rKClcclxuXHJcblxyXG4gICAgZGVmIGFjdGlvbl9yZXRyaWV2ZV9maWVsZHMoc2VsZik6XHJcbiAgICAgICAgXCJcIlwiXHU3NTFmXHU2MjEwXHU2MmE1XHU4ODY4XHU1YjU3XHU2YmI1XCJcIlwiXHJcbiAgICAgICAgIyBcdTUxNDhcdTUyMjBcdTk2NjRcdTY1ZTdcdTViNTdcdTZiYjVcdThiYjBcdTVmNTVcclxuICAgICAgICBzZWxmLmVudltcImNmLnJlcG9ydC5kZWZpbmUuZmllbGRcIl0uc2VhcmNoKFsoJ3JlcG9ydF9pZCcsICc9Jywgc2VsZi5pZCldKS51bmxpbmsoKVxyXG5cclxuICAgICAgICAjIFx1NTg5ZVx1NTJhMFx1NWI1N1x1NmJiNVxyXG4gICAgICAgIGZvciBsaW5lIGluIHNlbGYubW9kZWxfaWQuZmllbGRfaWQ6XHJcbiAgICAgICAgICAgICMgcHJpbnQoXCJuYW1lOiAlcywgbW9kZWxfaWQ6ICVzLCBmaWVsZF9pZDogJXNcIiUobGluZS5uYW1lLCBsaW5lLm1vZGVsX2lkLmlkLCBsaW5lLmlkKSlcclxuICAgICAgICAgICAgZmllbGQgPSBzZWxmLmVudlsnY2YucmVwb3J0LmRlZmluZS5maWVsZCddLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBcInJlcG9ydF9pZFwiOiBzZWxmLmlkLFxyXG4gICAgICAgICAgICAgICAgXCJtb2RlbF9pZFwiOiBsaW5lLm1vZGVsX2lkLmlkLFxyXG4gICAgICAgICAgICAgICAgXCJmaWVsZF9pZFwiOiBsaW5lLmlkLFxyXG4gICAgICAgICAgICAgICAgIyBcInJlbGF0ZWRfZmllbGRfaWRcIjogTm9uZSxcclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICBkZWYgYWN0aW9uX3JlbW92ZV9maWVsZHMoc2VsZik6XHJcbiAgICAgICAgXCJcIlwiXHU1MjIwXHU5NjY0XHU1ZGYyXHU4M2I3XHU1M2Q2XHU2YTIxXHU1NzhiXHU1YjU3XHU2YmI1XCJcIlwiXHJcbiAgICAgICAgc2VsZi5lbnZbXCJjZi5yZXBvcnQuZGVmaW5lLmZpZWxkXCJdLnNlYXJjaChbKCdyZXBvcnRfaWQnLCAnPScsIHNlbGYuaWQpXSkudW5saW5rKClcclxuXHJcbiAgICBkZWYgX21ha2VfcmVwb3J0X2RlZmluZChzZWxmKTpcclxuICAgICAgICBcIlwiXCJcdTc1MWZcdTYyMTBcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcIlwiXCJcclxuICAgICAgICByZXBvcnRfaWQgPSBzZWxmLl9nZXRfcmVwb3J0X2lkKClcclxuICAgICAgICByZXBvcnRfbmFtZSA9IHNlbGYuX2dldF9yZXBvcnRfbmFtZSgpXHJcbiAgICAgICAgcmVwb3J0X2ZpbGUgPSBzZWxmLl9nZXRfcmVwb3J0X2ZpbGUoKVxyXG5cclxuICAgICAgICAjIFx1NTE4ZFx1NTIxYlx1NWVmYVx1NjViMFx1OGJiMFx1NWY1NVxyXG4gICAgICAgIHJlcG9ydF9vYmogPSBzZWxmLmVudlsnaXIuYWN0aW9ucy5yZXBvcnQnXVxyXG4gICAgICAgIHJlcG9ydCA9IHJlcG9ydF9vYmouY3JlYXRlKHtcclxuICAgICAgICAgICAgXCJuYW1lXCI6IHNlbGYuY29tbWVudCBvciBzZWxmLm5hbWUsXHJcbiAgICAgICAgICAgIFwidHlwZVwiOiBcImlyLmFjdGlvbnMucmVwb3J0XCIsXHJcbiAgICAgICAgICAgIFwiYmluZGluZ190eXBlXCI6IFwicmVwb3J0XCIsXHJcbiAgICAgICAgICAgIFwibW9kZWxcIjogc2VsZi5tb2RlbF9pZC5tb2RlbCxcclxuICAgICAgICAgICAgXCJyZXBvcnRfdHlwZVwiOiBcInF3ZWItaHRtbFwiLFxyXG4gICAgICAgICAgICBcInJlcG9ydF9uYW1lXCI6IHJlcG9ydF9uYW1lLFxyXG4gICAgICAgICAgICBcInJlcG9ydF9maWxlXCI6IHJlcG9ydF9maWxlLCAgI1x1ODFlYVx1NWI5YVx1NGU0OVx1NzY4NFx1NjJhNVx1ODg2OFx1NTNkNlx1NjU3MFx1OTAzYlx1OGY5MXB5dGhvblx1N2M3Ylx1ZmYwY1x1NTk4Mlx1Njc5Y1x1NjcwOVx1ZmYwY1x1NTIxOVx1NjgzOVx1NjM2ZVx1OGJlNVx1NjU4N1x1NGVmNlx1NjI2N1x1ODg0Y1x1N2VkM1x1Njc5Y1x1NmUzMlx1NjdkM1x1NjJhNVx1ODg2OFxyXG4gICAgICAgICAgICBcIm11bHRpXCI6IEZhbHNlLFxyXG4gICAgICAgICAgICBcInByaW50X3JlcG9ydF9uYW1lXCI6IHNlbGYuY29tbWVudCBvciBzZWxmLm5hbWUsICAjIFRPRE9cdWZmMWFcdThmZDlcdTRlMmFcdTYyNTNcdTUzNzBcdTU0MGRcdTc5ZjBcdTUzZWZcdTY1MzlcdTYyMTBcdTUxNzZcdTRlZDZcdTUwM2NcclxuICAgICAgICAgICAgXCJhdHRhY2htZW50X3VzZVwiOiBGYWxzZSxcclxuICAgICAgICAgICAgXCJjZl9yZXBvcnRfZGVmaW5lX2lkXCI6IHNlbGYuaWQsXHJcbiAgICAgICAgICAgICMgXCJtZW51XCI6IFwiRmFsc2VcIiBpZiBzZWxmLmhpZGVfcHJpbnRfbWVudSBlbHNlIFwiVHJ1ZVwiLFxyXG4gICAgICAgICAgICAjIFwiaW52aXNpYmxlXCI6IFwiMFwiIGlmIHNlbGYuaGlkZV9wcmludF9tZW51IGVsc2UgXCIxXCIsXHJcbiAgICAgICAgfSlcclxuICAgICAgICBpZiByZXBvcnQ6XHJcbiAgICAgICAgICAgIHNlbGYuZW52W1wiaXIubW9kZWwuZGF0YVwiXS5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IFwiYWN0aW9uXyVzXCIlKHJlcG9ydF9pZCksXHJcbiAgICAgICAgICAgICAgICBcIm1vZGVsXCI6IFwiaXIuYWN0aW9ucy5yZXBvcnRcIixcclxuICAgICAgICAgICAgICAgIFwibW9kdWxlXCI6IFwiY2ZfcmVwb3J0X2Rlc2lnbmVyXCIsXHJcbiAgICAgICAgICAgICAgICBcIm5vdXBkYXRlXCI6ICBGYWxzZSxcclxuICAgICAgICAgICAgICAgIFwicmVzX2lkXCI6IHJlcG9ydC5pZFxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgICAgcmVwb3J0LmNyZWF0ZV9hY3Rpb24oKVxyXG5cclxuICAgIGRlZiBfbWFrZV90ZW1wbChzZWxmKTpcclxuICAgICAgICBcIlwiXCJcdTc1MWZcdTYyMTBcdTZhMjFcdTY3N2ZcdTViOWFcdTRlNDlcIlwiXCJcclxuXHJcbiAgICAgICAgdGVtcGxfaWQgPSBcIiVzJXNcIiAlIChSRVBPUlRfTkFNRV9QRVJGSVgsIHNlbGYubmFtZS5yZXBsYWNlKCcuJywgJ18nKSlcclxuICAgICAgICByZXBvcnRfaWQgPSBzZWxmLl9nZXRfcmVwb3J0X2lkKClcclxuICAgICAgICByZXBvcnRfbmFtZSA9IHNlbGYuX2dldF9yZXBvcnRfbmFtZSgpXHJcbiAgICAgICAgcmVwb3J0X2ZpbGUgPSBzZWxmLl9nZXRfcmVwb3J0X2ZpbGUoKVxyXG5cclxuICAgICAgICBfc2hvcnRfcmVwb3J0X25hbWUgPSBzZWxmLl9nZXRfcmVwb3J0X25hbWUoRmFsc2UpXHJcblxyXG4gICAgICAgIGFyY2hfZGIgPSBcIlwiXCI8P3htbCB2ZXJzaW9uPVwiMS4wXCI/PlxyXG48dCB0LW5hbWU9XCIlc1wiPlxyXG4gIDx0IHQtY2FsbD1cImNmcHJpbnQuaHRtbF9jb250YWluZXJcIj5cclxuICAgIDx0IHQtcmF3PVwic2hvd19tZXNzYWdlXCIvPlxyXG4gIDwvdD5cclxuPHNjcmlwdCB0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCI+XHJcbiAgPHQgdC1yYXc9XCJjZnByaW50X2pzb25cIi8+XHJcbjwvc2NyaXB0PlxyXG48L3Q+XHJcblwiXCJcIiAlIChfc2hvcnRfcmVwb3J0X25hbWUpXHJcblxyXG4gICAgICAgIHZpZXdfb2JqID0gc2VsZi5lbnZbJ2lyLnVpLnZpZXcnXVxyXG5cclxuICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgIHZpZXcgPSB2aWV3X29iai5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgXCJuYW1lXCI6IHJlcG9ydF9pZCxcclxuICAgICAgICAgICAgICAgIFwia2V5XCIgOiByZXBvcnRfbmFtZSxcclxuICAgICAgICAgICAgICAgIFwicHJpb3JpdHlcIjogMTYsXHJcbiAgICAgICAgICAgICAgICBcInR5cGVcIjogXCJxd2ViXCIsXHJcbiAgICAgICAgICAgICAgICBcImFyY2hfZGJcIjogYXJjaF9kYixcclxuICAgICAgICAgICAgICAgIFwibW9kZVwiOiBcInByaW1hcnlcIixcclxuICAgICAgICAgICAgICAgIFwiYWN0aXZlXCI6IFRydWUsXHJcbiAgICAgICAgICAgICAgICAjIFwiY2ZfcmVwb3J0X2RlZmluZV9pZFwiOiBzZWxmLmlkLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBpZiB2aWV3OlxyXG4gICAgICAgICAgICAgICAgIyBYTUxfSUQgXHU0ZTBlIHJlc19pZCBcdTViZjlcdTcxNjdcdTg4NjhcclxuICAgICAgICAgICAgICAgIHNlbGYuZW52W1wiaXIubW9kZWwuZGF0YVwiXS5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwibmFtZVwiOiBfc2hvcnRfcmVwb3J0X25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJtb2RlbFwiOiBcImlyLnVpLnZpZXdcIixcclxuICAgICAgICAgICAgICAgICAgICBcIm1vZHVsZVwiOiBcImNmX3JlcG9ydF9kZXNpZ25lclwiLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibm91cGRhdGVcIjogRmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgXCJyZXNfaWRcIjogdmlldy5pZFxyXG4gICAgICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOlxyXG4gICAgICAgICAgICBfbG9nZ2VyLmVycm9yKFwiQ3JlYXRlIHJlcG9ydCB0ZW1wbGF0ZVslc10gZmFpbGVkLlwiJShyZXBvcnRfbmFtZSkpXHJcbiAgICAgICAgICAgIHJhaXNlIGVcclxuXHJcbiAgICBkZWYgYWN0aW9uX2dlbmVyYXRlKHNlbGYpOlxyXG4gICAgICAgIFwiXCJcIlx1NzUxZlx1NjIxMFx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVx1NTQ4Y1x1NmEyMVx1Njc3Zlx1NWI5YVx1NGU0OVwiXCJcIlxyXG5cclxuICAgICAgICAjIFx1NTE0OFx1NTIyMFx1OTY2NFx1NjVlN1x1NzY4NFx1OGJiMFx1NWY1NVxyXG4gICAgICAgIHNlbGYuX3JlbW92ZV9yZXBvcnQoKVxyXG5cclxuICAgICAgICAjIFx1NTIxYlx1NWVmYW9kb29cdTUzOWZcdTc1MWZcdTc2ODRcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcclxuICAgICAgICBzZWxmLl9tYWtlX3JlcG9ydF9kZWZpbmQoKVxyXG5cclxuICAgICAgICAjIFx1NTIxYlx1NWVmYVF3ZWJcdTZhMjFcdTY3N2ZcdTViOWFcdTRlNDlcclxuICAgICAgICBzZWxmLl9tYWtlX3RlbXBsKClcclxuXHJcbiAgICAgICAgc2VsZi53cml0ZSh7XCJzdGF0ZVwiOiBcImRlZmluZWRcIn0pXHJcblxyXG4gICAgZGVmIGFjdGlvbl9kZXNpZ24oc2VsZik6XHJcbiAgICAgICAgXCJcIlwiXHU1NDJmXHU1MmE4XHU2YTIxXHU2NzdmXHU4YmJlXHU4YmExXCJcIlwiXHJcblxyXG4gICAgICAgICNcdTY3ZTVcdThiZTI1XHU2NzYxXHU4YmIwXHU1ZjU1XHU3NTI4XHU4YmIwXHU0ZThlXHU4YmJlXHU4YmExXHU2YTIxXHU2NzdmXHJcbiAgICAgICAgZG9jcyA9IHNlbGYuZW52W3NlbGYubW9kZWxfaWQubW9kZWxdLnNlYXJjaChbXSwgbGltaXQ9NSlcclxuICAgICAgICBkb2NpZHMgPSBbeC5pZCBmb3IgeCBpbiBkb2NzXVxyXG5cclxuICAgICAgICAjIHJlcG9ydF9pZCA9IFwiJXMlc1wiICUgKFJFUE9SVF9JRF9QRVJGSVgsIHNlbGYubmFtZSlcclxuICAgICAgICByZXBvcnRfaWQgPSBcImNmX3JlcG9ydF9kZXNpZ25lci4lcyVzXCIgJSAoUkVQT1JUX0lEX1BFUkZJWCwgc2VsZi5uYW1lKVxyXG4gICAgICAgICMgcmVwb3J0X2lkID0gXCIlcy4lcyVzXCIgJSAoc2VsZi5tb2RlbF9pZC5tb2RlbCwgUkVQT1JUX0lEX1BFUkZJWCwgc2VsZi5uYW1lKVxyXG4gICAgICAgIHJlcG9ydF9uYW1lID0gXCJjZl9yZXBvcnRfZGVzaWduZXIuJXMlc1wiICUgKFJFUE9SVF9OQU1FX1BFUkZJWCwgc2VsZi5uYW1lKVxyXG4gICAgICAgIGRhdGFzID0ge1wiaXNfZGVzaWduXCI6IFRydWUsXHJcbiAgICAgICAgICAgICAgICAgXCJkb2NzXCI6IGRvY3MsXHJcbiAgICAgICAgICAgICAgICAgXCJkb2NpZHNcIjogZG9jaWRzXHJcbiAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gKHNlbGYuZW52Wydpci5hY3Rpb25zLnJlcG9ydCddLnNlYXJjaChbKCdyZXBvcnRfbmFtZScsICc9JywgcmVwb3J0X25hbWUpXSwgbGltaXQ9MSlcclxuICAgICAgICAgICAgICAgIC53aXRoX2NvbnRleHQoeydpc19kZXNpZ24nOiBUcnVlfSlcclxuICAgICAgICAgICAgICAgIC5yZXBvcnRfYWN0aW9uKGRvY2lkcywgZGF0YSA9IGRhdGFzKSlcclxuXHJcblxyXG5jbGFzcyBDRlJlcG9ydERlZmluZUZpZWxkcyhtb2RlbHMuTW9kZWwpOlxyXG4gICAgX25hbWUgPSAnY2YucmVwb3J0LmRlZmluZS5maWVsZCdcclxuICAgIF9kZXNjcmlwdGlvbiA9ICdcdTYyYTVcdTg4NjhcdTViNTdcdTZiYjUnXHJcbiAgICBfb3JkZXIgPSAncmVwb3J0X2lkLCBpZCdcclxuXHJcbiAgICByZXBvcnRfaWQgPSBmaWVsZHMuTWFueTJvbmUoXCJjZi5yZXBvcnQuZGVmaW5lXCIsIHN0cmluZz1cIlx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVwiLCByZXF1aXJlZD1UcnVlLCBvbmRlbGV0ZT0nY2FzY2FkZScsIGhlbHA9XCJcdTViNTdcdTZiYjVcdTYyNDBcdTU3MjhcdTc2ODRcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcIilcclxuICAgIG1vZGVsX2lkID0gZmllbGRzLk1hbnkyb25lKCdpci5tb2RlbCcsIHN0cmluZz1cIlx1NjU3MFx1NjM2ZVx1ODg2OChcdTZhMjFcdTU3OGIpXCIsIHJlcXVpcmVkPVRydWUsIG9uZGVsZXRlPSdjYXNjYWRlJywgaGVscD1cIlx1NWI1N1x1NmJiNVx1NjI0MFx1NTcyOFx1NzY4NG1vZGVsXCIpXHJcbiAgICBtb2RlbF9uYW1lID0gZmllbGRzLkNoYXIocmVsYXRlZD1cIm1vZGVsX2lkLm5hbWVcIiwgc3RyaW5nPVwiXHU2YTIxXHU1NzhiXHU1NDBkXHU3OWYwXCIpXHJcbiAgICBmaWVsZF9pZCA9IGZpZWxkcy5NYW55Mm9uZShcImlyLm1vZGVsLmZpZWxkc1wiLCBzdHJpbmc9XCJcdTViNTdcdTZiYjVcIiwgcmVxdWlyZWQ9VHJ1ZSwgb25kZWxldGU9J2Nhc2NhZGUnKVxyXG4gICAgbmFtZSA9IGZpZWxkcy5DaGFyKHJlbGF0ZWQ9XCJmaWVsZF9pZC5uYW1lXCIsIHN0cmluZz0nXHU1YjU3XHU2YmI1XHU1NDBkXHU3OWYwJylcclxuICAgIGZpZWxkX2Rlc2NyaXB0aW9uID0gZmllbGRzLkNoYXIocmVsYXRlZD1cImZpZWxkX2lkLmZpZWxkX2Rlc2NyaXB0aW9uXCIsIHN0cmluZz0nXHU1YjU3XHU2YmI1XHU4YmY0XHU2NjBlJylcclxuICAgIHR0eXBlID0gZmllbGRzLlNlbGVjdGlvbihyZWxhdGVkPVwiZmllbGRfaWQudHR5cGVcIiwgc3RyaW5nPSdcdTViNTdcdTZiYjVcdTdjN2JcdTU3OGInKVxyXG4gICAgcmVsYXRlZF9maWVsZF9pZCA9IGZpZWxkcy5NYW55Mm9uZShcImNmLnJlcG9ydC5kZWZpbmUuZmllbGRcIiwgc3RyaW5nPVwiXHU1MTczXHU4MDU0XHU1YjU3XHU2YmI1XCIsIGhlbHA9XCJcdTRlMGVcdTUxNzNcdTgwNTRcdTg4NjhcdTUxNzNcdTgwNTRcdTc2ODRcdTViNTdcdTZiYjUocmVsYXRlZF9leHRlcm5hbF9maWVsZF9pZHMpXCIpICAjLCBvbGRuYW1lPVwicGFyZW50X2ZpZWxkX2lkXCJcclxuICAgIHJlbGF0ZWRfZXh0ZXJuYWxfZmllbGRfaWRzID0gZmllbGRzLk9uZTJtYW55KFwiY2YucmVwb3J0LmRlZmluZS5maWVsZFwiLCBcInJlbGF0ZWRfZmllbGRfaWRcIiwgc3RyaW5nPVwiXHU1MTczXHU4MDU0XHU2NTcwXHU2MzZlXHU4ODY4XHU1YjU3XHU2YmI1XCIsIGhlbHA9XCJcdTRlMGVcdTVmNTNcdTUyNGRcdTg4NjhcdTc2ZjhcdTUxNzNcdTgwNTRcdTc2ODRcdTg4NjhcdTViNTdcdTZiYjVcIikgICMsb2xkbmFtZT1cInN1Yl9maWVsZF9pZHNcIlxyXG4gICAgbm90ZSA9IGZpZWxkcy5UZXh0KHN0cmluZz1cIlx1NTkwN1x1NmNlOFwiKVxyXG5cclxuICAgIHJlbGF0ZWRfZmllbGRfbW9kZWxfaWQgPSBmaWVsZHMuTWFueTJvbmUoJ2lyLm1vZGVsJywgY29tcHV0ZT1cIl9jb21wdXRlX3JlbGF0aW9uX21vZGVsXCIsIHN0cmluZz1cIlx1NTE3M1x1ODA1NFx1NjU3MFx1NjM2ZVx1ODg2OFx1ZmYwOFx1NmEyMVx1NTc4Ylx1ZmYwOVwiLCBoZWxwPVwiXHU1MTczXHU4MDU0XHU1YjU3XHU2YmI1XHU2MjQwXHU1NzI4XHU3Njg0bW9kZWxcdTMwMDJcdTVmNTNcdTUyNGRcdTViNTdcdTZiYjVcdTRlM2FPbmUybWFueVx1ZmYwY01hbnkybWFueVx1ZmYwY01hbnkyb25lXHU2NWY2XHU2NzA5XHU1MDNjXHUzMDAyXCIpXHJcbiAgICAjIHJlbGF0ZWRfZmllbGRfbW9kZWxfbmFtZSA9IGZpZWxkcy5DaGFyKHJlbGF0ZWQ9XCJyZWxhdGVkX2ZpZWxkX21vZGVsX2lkLm5hbWVcIiwgc3RyaW5nPVwiXHU1MTczXHU4MDU0XHU2NTcwXHU2MzZlXHU4ODY4XHU1NDBkXHU3OWYwXCIsIGhlbHA9XCJcdTUxNzNcdTgwNTRcdTViNTdcdTZiYjVcdTYyNDBcdTU3MjhcdTc2ODRtb2RlbFx1NTQwZFx1NzlmMFwiKVxyXG4gICAgcmVsYXRlZF9maWVsZF9tb2RlbF9uYW1lID0gZmllbGRzLkNoYXIoY29tcHV0ZT1cIl9jb21wdXRlX3JlbGF0aW9uX21vZGVsXCIsIHN0cmluZz1cIlx1NTE3M1x1ODA1NFx1NjU3MFx1NjM2ZVx1ODg2OFx1NTQwZFx1NzlmMFwiLCBoZWxwPVwiXHU1MTczXHU4MDU0XHU1YjU3XHU2YmI1XHU2MjQwXHU1NzI4XHU3Njg0bW9kZWxcdTU0MGRcdTc5ZjBcIilcclxuXHJcbiAgICBfc3FsX2NvbnN0cmFpbnRzID0gW1xyXG4gICAgICAgICgndW5pcV9yZXBvZXJfbW9kZWxfZmllbGQnLCAndW5pcXVlKHJlcG9ydF9pZCwgbW9kZWxfaWQsIHJlbGF0ZWRfZmllbGRfaWQsIGZpZWxkX2lkKScsICdcdTYyYTVcdTg4NjggKyBcdTg4NjggKyBcdTUxNzNcdTgwNTRcdTRlMGFcdTdlYTdcdTViNTdcdTZiYjUgKyBcdTViNTdcdTZiYjVcdTVmYzVcdTk4N2JcdTU1MmZcdTRlMDAhJyksXHJcbiAgICBdXHJcblxyXG4gICAgQGFwaS5tb2RlbFxyXG4gICAgZGVmIGNyZWF0ZShzZWxmLCB2YWxzKTpcclxuICAgICAgICAjIGZvciB2IGluIHZhbHM6XHJcbiAgICAgICAgaWYgbm90IHZhbHMuZ2V0KFwibW9kZWxfaWRcIiwgRmFsc2UpOlxyXG4gICAgICAgICAgICBmaWVsZCA9IHNlbGYuZW52W1wiaXIubW9kZWwuZmllbGRzXCJdLmJyb3dzZSh2YWxzLmdldChcImZpZWxkX2lkXCIsIDApKVxyXG4gICAgICAgICAgICBpZiBmaWVsZDpcclxuICAgICAgICAgICAgICAgIHZhbHNbXCJtb2RlbF9pZFwiXSA9IGZpZWxkLm1vZGVsX2lkLmlkXHJcblxyXG4gICAgICAgICNcdTUxNDhcdTUyMjBcdTk2NjRcdTY1ZTdcdThiYjBcdTVmNTVcclxuICAgICAgICBzZWxmLnNlYXJjaChbKCdyZXBvcnRfaWQnLCAnPScsIHZhbHMuZ2V0KFwicmVwb3J0X2lkXCIsIDApKSwgKCdtb2RlbF9pZCcsICc9JywgdmFscy5nZXQoXCJtb2RlbF9pZFwiLCAwKSksXHJcbiAgICAgICAgICAgICAgICAgICAgICgncmVsYXRlZF9maWVsZF9pZCcsICc9JywgdmFscy5nZXQoXCJyZWxhdGVkX2ZpZWxkX2lkXCIsIDApKSwgKCdmaWVsZF9pZCcsICc9JywgdmFscy5nZXQoXCJmaWVsZF9pZFwiLCAwKSldKS51bmxpbmsoKVxyXG5cclxuICAgICAgICByZXR1cm4gc3VwZXIoQ0ZSZXBvcnREZWZpbmVGaWVsZHMsIHNlbGYpLmNyZWF0ZSh2YWxzKVxyXG5cclxuICAgIGRlZiBfY29tcHV0ZV9yZWxhdGlvbl9tb2RlbChzZWxmKTpcclxuICAgICAgICBmb3IgZmllbGQgaW4gc2VsZjpcclxuICAgICAgICAgICAgcmVsYXRpb24gPSBzZWxmLmVudlsnaXIubW9kZWwnXS5fZ2V0KGZpZWxkLmZpZWxkX2lkLnJlbGF0aW9uKVxyXG4gICAgICAgICAgICBmaWVsZC5yZWxhdGVkX2ZpZWxkX21vZGVsX2lkID0gcmVsYXRpb24uaWQgaWYgcmVsYXRpb24gZWxzZSBOb25lXHJcbiAgICAgICAgICAgIGZpZWxkLnJlbGF0ZWRfZmllbGRfbW9kZWxfbmFtZSA9IHJlbGF0aW9uLm5hbWUgaWYgcmVsYXRpb24gZWxzZSBOb25lXHJcblxyXG4gICAgZGVmIGFjdGlvbl9yZXRyaWV2ZV9maWVsZHMoc2VsZik6XHJcbiAgICAgICAgXCJcIlwiXHU4M2I3XHU1M2Q2XHU1MTczXHU4MDU0XHU4ODY4XHU1YjU3XHU2YmI1XCJcIlwiXHJcbiAgICAgICAgaWYgc2VsZi5maWVsZF9pZCBhbmQgKHNlbGYuZmllbGRfaWQudHR5cGUgPT0gJ29uZTJtYW55JyBvciBzZWxmLmZpZWxkX2lkLnR0eXBlID09ICdtYW55Mm1hbnknIG9yIHNlbGYuZmllbGRfaWQudHR5cGUgPT0gJ21hbnkyb25lJyk6XHJcbiAgICAgICAgICAgIGlmIHNlbGYuZW52LmdldChzZWxmLmZpZWxkX2lkLnJlbGF0aW9uLCAnX0VNUFRZJyk9PSdfRU1QVFknOiAgI1x1OGZkOVx1OTFjY1x1NTM3M1x1NGY3Zlx1NmNhMVx1NjcwOVx1NjU3MFx1NjM2ZVx1ZmYwY1x1ODNiN1x1NTNkNlx1NTIzMFx1NGU1Zlx1NjYyZlx1NGUwMFx1NGUyYVx1N2E3YWxpc3RcdWZmMGNcdTRlMGRcdTgwZmRcdTc1MjhGYWxzZVx1Njc2NVx1NTIyNFx1NjVhZFx1ZmYwY1x1NWZjNVx1OTg3Ylx1OGJiZVx1N2Y2ZVx1NGUwMFx1NGUyYVx1NjgwN1x1NWZkN1xyXG4gICAgICAgICAgICAgICAgcmFpc2UgQWNjZXNzRXJyb3IoXyhcIlx1NjcyYVx1NjI3ZVx1NTIzMFx1NTE3M1x1ODA1NFx1NWI1N1x1NmJiNVx1NWJmOVx1NWU5NFx1NzY4NFx1ODg2OFx1ZmYwOCVzXHVmZjA5XHVmZjBjXHU2NWUwXHU2Y2Q1XHU4M2I3XHU1M2Q2XHU1MTczXHU4MDU0XHU4ODY4XHU1YjU3XHU2YmI1XHVmZjAxXCIgJSAoc2VsZi5maWVsZF9pZC5yZWxhdGlvbikpKVxyXG5cclxuICAgICAgICAgICAgIyByZWxfbW9kZWwgPSBzZWxmLmVudltcImlyLm1vZGVsXCJdLnNlYXJjaChbKCdtb2RlbCcsICc9Jywgc2VsZi5maWVsZF9pZC5yZWxhdGlvbildLCBsaW1pdD0xKVxyXG4gICAgICAgICAgICByZWxfbW9kZWwgPSBzZWxmLmVudlsnaXIubW9kZWwnXS5fZ2V0KHNlbGYuZmllbGRfaWQucmVsYXRpb24pXHJcblxyXG4gICAgICAgICAgICAjIFx1NTE0OFx1NTIyMFx1OTY2NFx1NjVlN1x1NWI1N1x1NmJiNVx1OGJiMFx1NWY1NVxyXG4gICAgICAgICAgICBzZWxmLmFjdGlvbl9yZW1vdmVfZmllbGRzKClcclxuXHJcbiAgICAgICAgICAgICMgXHU1ODllXHU1MmEwXHU1YjU3XHU2YmI1XHJcbiAgICAgICAgICAgIGZvciBsaW5lIGluIHJlbF9tb2RlbC5maWVsZF9pZDpcclxuICAgICAgICAgICAgICAgIGZpZWxkID0gc2VsZi5lbnZbJ2NmLnJlcG9ydC5kZWZpbmUuZmllbGQnXS5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIFwicmVsYXRlZF9maWVsZF9pZFwiOiBzZWxmLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwicmVwb3J0X2lkXCI6IHNlbGYucmVwb3J0X2lkLmlkLFxyXG4gICAgICAgICAgICAgICAgICAgIFwibW9kZWxfaWRcIjogbGluZS5tb2RlbF9pZC5pZCxcclxuICAgICAgICAgICAgICAgICAgICBcImZpZWxkX2lkXCI6IGxpbmUuaWQsXHJcbiAgICAgICAgICAgICAgICB9KVxyXG5cclxuICAgIGRlZiBhY3Rpb25fcmVtb3ZlX2ZpZWxkcyhzZWxmKTpcclxuICAgICAgICBcIlwiXCJcdTUyMjBcdTk2NjRcdTUxNzNcdTgwNTRcdTg4NjhcdTViNTdcdTZiYjVcIlwiXCJcclxuICAgICAgICBpZiBzZWxmLmZpZWxkX2lkIGFuZCAoc2VsZi5maWVsZF9pZC50dHlwZSA9PSAnb25lMm1hbnknIG9yIHNlbGYuZmllbGRfaWQudHR5cGUgPT0gJ21hbnkybWFueScgb3Igc2VsZi5maWVsZF9pZC50dHlwZSA9PSAnbWFueTJvbmUnKTpcclxuICAgICAgICAgICAgcmVsX21vZGVsID0gc2VsZi5lbnZbJ2lyLm1vZGVsJ10uX2dldChzZWxmLmZpZWxkX2lkLnJlbGF0aW9uKVxyXG5cclxuICAgICAgICAgICAgIyBcdTUxNDhcdTUyMjBcdTk2NjRcdTY1ZTdcdTViNTdcdTZiYjVcdThiYjBcdTVmNTVcclxuICAgICAgICAgICAgc2VsZi5lbnZbXCJjZi5yZXBvcnQuZGVmaW5lLmZpZWxkXCJdLnNlYXJjaChbKCdyZXBvcnRfaWQnLCAnPScsIHNlbGYucmVwb3J0X2lkLmlkKSwgKCdtb2RlbF9pZCcsICc9JywgcmVsX21vZGVsLmlkKSwgKCdyZWxhdGVkX2ZpZWxkX2lkJywgJz0nLCBzZWxmLmlkKV0pLnVubGluaygpXHJcblxyXG4gICAgZGVmIGFjdGlvbl92aWV3X3N1Yl9maWVsZHMoc2VsZik6XHJcbiAgICAgICAgXCJcIlwiXHU2N2U1XHU3NzBiXHU1MTczXHU4MDU0XHU4ODY4XHU1YjU3XHU2YmI1XCJcIlwiXHJcbiAgICAgICAgc2VsZi5lbnN1cmVfb25lKClcclxuICAgICAgICBmb3JtX2lkID0gc2VsZi5lbnYucmVmKCdjZl9yZXBvcnRfZGVzaWduZXIuY2ZfcmVwb3J0X2RlZmluZV9maWVsZF9mb3JtJykuaWRcclxuICAgICAgICByZXR1cm4geyd0eXBlJzogJ2lyLmFjdGlvbnMuYWN0X3dpbmRvdycsXHJcbiAgICAgICAgICAgICAgICAncmVzX21vZGVsJzogJ2NmLnJlcG9ydC5kZWZpbmUuZmllbGQnLFxyXG4gICAgICAgICAgICAgICAgJ3ZpZXdfbW9kZSc6ICdmb3JtJyxcclxuICAgICAgICAgICAgICAgICd2aWV3cyc6IFsoZm9ybV9pZCwgJ2Zvcm0nKV0sXHJcbiAgICAgICAgICAgICAgICAncmVzX2lkJzogc2VsZi5pZCxcclxuICAgICAgICAgICAgICAgICd0YXJnZXQnOiAnbmV3JyxcclxuICAgICAgICAgICAgICAgICdsaW1pdCc6IDEwMDAsXHJcbiAgICAgICAgICAgICAgICAnbmFtZSc6J1x1NTE3M1x1ODA1NFx1ODg2OFx1NWI1N1x1NmJiNScsXHJcbiAgICAgICAgICAgICAgICAnZmxhZ3MnOiB7J2Zvcm0nOiB7J2FjdGlvbl9idXR0b25zJzogRmFsc2V9fVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuIyBjbGFzcyBJclVJVmlldyhtb2RlbHMuTW9kZWwpOlxyXG4jICAgICBfaW5oZXJpdCA9ICdpci51aS52aWV3J1xyXG4jXHJcbiMgICAgIGNmX3JlcG9ydF9kZWZpbmVfaWQgPSBmaWVsZHMuTWFueTJvbmUoXCJjZi5yZXBvcnQuZGVmaW5lXCIsIHN0cmluZz1cIlx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVwiLCBoZWxwPVwiXHU1OTgyXHU2NzljXHU2NjJmXHU1ZWI3XHU4NjRlXHU0ZTkxXHU2MmE1XHU4ODY4XHVmZjBjXHU1MjE5XHU0ZmRkXHU1YjU4XHU1YmY5XHU1ZTk0XHU3Njg0XHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5XHUzMDAyXCIpXHJcblxyXG4jIyMgQmVnaW4gb2YgY2ZfcmVuZGVyXHJcbmZyb20geG1sLmRvbSBpbXBvcnQgbWluaWRvbVxyXG5pbXBvcnQgdXVpZFxyXG5cclxuU0hPV19NRVNTQUhFX1RFTVBMID0gXCI8aDUgc3R5bGU9XFxcIm1hcmdpbi10b3A6IDNyZW07IHRleHQtYWxpZ246IGNlbnRlcjtcXFwiPiVzPC9oND5cIlxyXG5cclxuIyBjbGFzcyBSZXBvcnQobW9kZWxzLk1vZGVsKTpcclxuY2xhc3MgSXJBY3Rpb25zUmVwb3J0KG1vZGVscy5Nb2RlbCk6XHJcbiAgICBcIlwiXCJcclxuICAgIFx1N2VlN1x1NjI3ZlJlcG9ydFx1NTdmYVx1N2M3Ylx1ZmYwY1x1NTg5ZVx1NTJhMFx1ODFlYVx1NWI5YVx1NGU0OVx1NTFmZFx1NjU3MFx1OGY5M1x1NTFmYVx1NTIzMFFXZWJcdTZhMjFcdTY3N2ZcdTRlMmRcdWZmMGNcdTY1YjlcdTRmYmZcdTU3MjhcdTZhMjFcdTY3N2ZcdTRlMmRcdTRmYmZcdTYzNzdcdTUzZDZcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdTZhMjFcdTY3N2ZcclxuICAgIFwiXCJcIlxyXG4gICAgIyBfaW5oZXJpdCA9IFwicmVwb3J0XCJcclxuICAgIF9pbmhlcml0ID0gJ2lyLmFjdGlvbnMucmVwb3J0J1xyXG4gICAgX2Rlc2NyaXB0aW9uID0gJ1JlcG9ydCBBY3Rpb24nXHJcblxyXG4gICAgY2ZfcmVwb3J0X2RlZmluZV9pZCA9IGZpZWxkcy5NYW55Mm9uZShcImNmLnJlcG9ydC5kZWZpbmVcIiwgc3RyaW5nPVwiXHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5XCIsIGhlbHA9XCJcdTU5ODJcdTY3OWNcdTY2MmZcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdWZmMGNcdTUyMTlcdTRmZGRcdTViNThcdTViZjlcdTVlOTRcdTc2ODRcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcdTMwMDJcIilcclxuXHJcbiAgICBkZWYgX21ha2VfY2ZwcmludF9qc29uKHNlbGYsIHZhbHVlcyk6XHJcbiAgICAgICAgXCJcIlwiXHU2ODM5XHU2MzZlXHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5XHU3NTFmXHU2MjEwXHU2MmE1XHU4ODY4XHU2NTcwXHU2MzZlXCJcIlwiXHJcblxyXG4gICAgICAgIGRlZiBfcmVtb3ZlX2R1cGxpY2F0ZWQobHN0KTpcclxuICAgICAgICAgICAgXCJcIlwiXHJcbiAgICAgICAgICAgIFx1NTIyMFx1OTY2NFx1NTIxN1x1ODg2OFx1NGUyZFx1NzY4NFx1OTFjZFx1NTkwZFx1NTAzY1xyXG4gICAgICAgICAgICA6cGFyYW0gbHN0OlxyXG4gICAgICAgICAgICA6cmV0dXJuOlxyXG4gICAgICAgICAgICBcIlwiXCJcclxuICAgICAgICAgICAgc2VlbiA9IHNldCgpXHJcbiAgICAgICAgICAgIG5ld19sc3QgPSBbXVxyXG4gICAgICAgICAgICBzdGFydCA9IHRpbWUudGltZSgpXHJcbiAgICAgICAgICAgIGZvciBkIGluIGxzdDpcclxuICAgICAgICAgICAgICAgIHQgPSB0dXBsZShkLml0ZW1zKCkpXHJcbiAgICAgICAgICAgICAgICBpZiB0IG5vdCBpbiBzZWVuOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlZW4uYWRkKHQpXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3X2xzdC5hcHBlbmQoZClcclxuXHJcbiAgICAgICAgICAgIGVuZCA9IHRpbWUudGltZSgpXHJcbiAgICAgICAgICAgIHByaW50KFwiX3JlbW92ZV9kdXBsaWNhdGVkIGNvbnN1bWU6ICVmXCIgJSAoKGVuZCAtIHN0YXJ0KSkpXHJcbiAgICAgICAgICAgIHJldHVybiBuZXdfbHN0XHJcblxyXG4gICAgICAgIGRlZiBfY29udmVydF9maWVsZF90eXBlKGZpZWxkKTpcclxuICAgICAgICAgICAgXCJcIlwiXHJcbiAgICAgICAgICAgIFx1NWI1N1x1NmJiNVx1N2M3Ylx1NTc4Ylx1OGY2Y1x1NjM2Mlx1NjIxMFx1NWViN1x1ODY0ZVx1NTNiYlx1NjJhNVx1ODg2OFx1NWI1N1x1NmJiNVx1N2M3Ylx1NTc4YlxyXG4gICAgICAgICAgICA6cGFyYW0gZmllbGQ6IFx1NWY4NVx1OGY2Y1x1NjM2Mlx1NWI1N1x1NmJiNVxyXG4gICAgICAgICAgICA6cmV0dXJuOlxyXG4gICAgICAgICAgICBcIlwiXCJcclxuICAgICAgICAgICAgX3R5cGUgPSBcInN0clwiXHJcbiAgICAgICAgICAgIGlmIGZpZWxkLnR0eXBlIGluIFtcImJpbmFyeVwiXTpcclxuICAgICAgICAgICAgICAgIF90eXBlID0gXCJibG9iXCJcclxuICAgICAgICAgICAgZWxpZiBmaWVsZC50dHlwZSBpbiBbXCJib29sZWFuXCJdOlxyXG4gICAgICAgICAgICAgICAgX3R5cGUgPSBcImJvb2xlYW5cIlxyXG4gICAgICAgICAgICBlbGlmIGZpZWxkLnR0eXBlIGluIFsnY2hhcicsICdzZWxlY3Rpb24nLCAncmVmZXJlbmNlJ106XHJcbiAgICAgICAgICAgICAgICBfdHlwZSA9IFwic3RyXCJcclxuICAgICAgICAgICAgZWxpZiBmaWVsZC50dHlwZSBpbiBbJ3RleHQnLCAnaHRtbCddOlxyXG4gICAgICAgICAgICAgICAgX3R5cGUgPSBcInRleHRcIlxyXG4gICAgICAgICAgICBlbGlmIGZpZWxkLnR0eXBlIGluIFsnZGF0ZScsICdkYXRldGltZSddOlxyXG4gICAgICAgICAgICAgICAgX3R5cGUgPSBcImRhdGVcIlxyXG4gICAgICAgICAgICBlbGlmIGZpZWxkLnR0eXBlIGluIFsnZmxvYXQnLCAnbW9uZXRhcnknXTpcclxuICAgICAgICAgICAgICAgIF90eXBlID0gXCJmbG9hdFwiXHJcbiAgICAgICAgICAgIGVsaWYgZmllbGQudHR5cGUgaW4gW1wiaW50ZWdlclwiLCBcIm1hbnkyb25lXCJdOlxyXG4gICAgICAgICAgICAgICAgX3R5cGUgPSBcImludFwiXHJcbiAgICAgICAgICAgIHJldHVybiBfdHlwZVxyXG5cclxuICAgICAgICBkZWYgX21ha2VfZGF0YV9vYmoocmVwb3J0X2RlZmluZSwgbW9kZWwsIGZpZWxkcywgZG9jcywgZGF0YXMsIHJlbGF0ZWRfZmllbGQ9RmFsc2UpOlxyXG4gICAgICAgICAgICBcIlwiXCJcclxuICAgICAgICAgICAgXHU3NTFmXHU2MjEwXHU2MjUzXHU1MzcwXHU2NTcwXHU2MzZlXHU1YmY5XHU4YzYxXHJcbiAgICAgICAgICAgIDpwYXJhbSByZXBvcnRfZGVmaW5lOiBcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlcclxuICAgICAgICAgICAgOnBhcmFtIG1vZGVsOiAgICAgICAgIFx1ODk4MVx1NzUxZlx1NjIxMFx1NjU3MFx1NjM2ZVx1NzY4NG1vZGVsXHJcbiAgICAgICAgICAgIDpwYXJhbSBmaWVsZHM6ICAgICAgICBcdTg5ODFcdTc1MWZcdTYyMTBcdTc2ODRcdTViNTdcdTZiYjVcclxuICAgICAgICAgICAgOnBhcmFtIGRvY3M6ICAgICAgICAgIFx1NjU3MFx1NjM2ZVx1OGJiMFx1NWY1NVx1OTZjNlxyXG4gICAgICAgICAgICA6cGFyYW0gZGF0YXM6ICAgICAgICAgXHU4ZjZjXHU2MzYyXHU1NDBlXHU3Njg0XHU2NTcwXHU2MzZlXHU3ZWQzXHU2Nzg0XHJcbiAgICAgICAgICAgIDpwYXJhbSByZWxhdGVkX2ZpZWxkOiBcdTY2MmZcdTU0MjZcdTY2MmZcdTUxNzNcdTgwNTRcdTViNTdcdTZiYjVcclxuICAgICAgICAgICAgOnJldHVybjpcclxuICAgICAgICAgICAgXCJcIlwiXHJcbiAgICAgICAgICAgIGZpZWxkX2xlbiA9IHt9ICAjXHU4YmIwXHU1ZjU1XHU1YjU3XHU2YmI1XHU5NTdmXHU1ZWE2XHVmZjBjXHU3NTFmXHU2MjEwXHU2NTcwXHU2MzZlXHU3ZWQzXHU2Nzg0XHU2NWY2XHU3NTI4XHU0ZjVjXHU1YjU3XHU2YmI1XHU5NTdmXHU1ZWE2XHJcblxyXG4gICAgICAgICAgICBtb2RlbF9uYW1lX2Rhc2ggPSBtb2RlbC5tb2RlbC5yZXBsYWNlKFwiLlwiLCBcIl9cIilcclxuXHJcbiAgICAgICAgICAgICMgIyMjIFx1NGUyNVx1OTFjZFx1ZmYxYVx1OGZkOVx1OTFjY1x1NGUwZFx1ODBmZFx1NjI4YW1hbnkyb25lXHU3Njg0XHU1MTczXHU4MDU0XHU1MTczXHU3Y2ZiXHU4ODY4XHU1MmEwXHU0ZTNiXHU4ODY4XHU1YjU3XHU2YmI1XHU3Njg0XHU1MDNjXHU0ZjVjXHU1NDBlXHU3ZjAwXHVmZjBjXHU5MGEzXHU2ODM3XHU1ZjUzXHU2NTcwXHU2MzZlXHU1M2Q4XHU1MzE2XHU2NWY2XHVmZjBjXHU2YTIxXHU1NzU3XHU0ZTJkXHU3Njg0XHU2MjUzXHU1MzcwXHU3ZWM0XHU0ZWY2XHU2NWUwXHU2Y2Q1XHU4MWVhXHU5MDAyXHU1ZTk0XHU1NDBkXHU3OWYwXHU3Njg0XHU1M2Q4XHU1MzE2XHJcbiAgICAgICAgICAgICMgbWFueTJvbmVcdTc2ODRcdTUxNzNcdTgwNTRcdTU3MjhcdTZhMjFcdTY3N2ZcdTRlMmRcdTkwMWFcdThmYzdEYXRhc2V0XHU3Njg0bG9jYXRlXHU1MWZkXHU2NTcwXHU2NzY1XHU1YjllXHU3M2IwXHU4YmIwXHU1ZjU1XHU3Njg0XHU1YjlhXHU0ZjRkXHVmZjBjXHU0ZTBkXHU1NzI4XHU2NTcwXHU2MzZlXHU3ZWQzXHU2Nzg0XHU0ZTJkXHU1ZjNhXHU1MjM2XHU0ZjUzXHU3M2IwXHU1MTczXHU4MDU0XHU1MTczXHU3Y2ZiXHJcbiAgICAgICAgICAgICMgaWYgcmVsYXRlZF9maWVsZDpcclxuICAgICAgICAgICAgIyAgICAgbW9kZWxfbmFtZV9kYXNoID0gbW9kZWxfbmFtZV9kYXNoICsgXCJfXCIgKyByZWxhdGVkX2ZpZWxkLm5hbWUucmVwbGFjZShcIi5cIiwgXCJfXCIpICsgXCJfXCIgKyBzdHIocmVsYXRlZF9maWVsZC5pZClcclxuXHJcbiAgICAgICAgICAgIGlmIG5vdCBkYXRhcy5nZXQobW9kZWxfbmFtZV9kYXNoLCBGYWxzZSk6XHJcbiAgICAgICAgICAgICAgICBkYXRhc1ttb2RlbF9uYW1lX2Rhc2hdID0ge1wiY29sc1wiOiBbXSwgXCJyb3dzXCI6IFtdfVxyXG5cclxuICAgICAgICAgICAgY29scyA9IGRhdGFzW21vZGVsX25hbWVfZGFzaF1bXCJjb2xzXCJdXHJcblxyXG4gICAgICAgICAgICBfTUlOX0ZJRUxEX0xFTiA9IDI1NVxyXG5cclxuICAgICAgICAgICAgc3RhcnQgPSB0aW1lLnRpbWUoKVxyXG4gICAgICAgICAgICBmb3IgcmVjb3JkIGluIGRvY3M6XHJcbiAgICAgICAgICAgICAgICByb3cgPSB7fVxyXG4gICAgICAgICAgICAgICAgZm9yIGZpZWxkIGluIFtkIGZvciBkIGluIGZpZWxkcyBpZiBkLm1vZGVsX2lkLm1vZGVsID09IG1vZGVsLm1vZGVsXTpcclxuICAgICAgICAgICAgICAgICAgICB0cnk6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIGZpZWxkLnR0eXBlID09ICdiaW5hcnknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ZpZWxkLm5hbWVdID0gXCJiYXNlNjQvanBnOiVzXCIgJSAocmVjb3JkW2ZpZWxkLm5hbWVdLnN0cmlwKCkuZGVjb2RlKFwiVVRGLThcIikucmVwbGFjZShcIlxcblwiLCBcIlwiKSBpZiByZWNvcmRbZmllbGQubmFtZV0gZWxzZSBcIlwiKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBmaWVsZC50dHlwZSBpbiBbJ2Jvb2xlYW4nXTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tmaWVsZC5uYW1lXSA9IHJlY29yZFtmaWVsZC5uYW1lXVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBmaWVsZC50dHlwZSBpbiBbJ2NoYXInLCAndGV4dCcsICdodG1sJywgJ3JlZmVyZW5jZSddOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ZpZWxkLm5hbWVdID0gcmVjb3JkW2ZpZWxkLm5hbWVdIGlmIHJlY29yZFtmaWVsZC5uYW1lXSBlbHNlIFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIGxlbihyb3dbZmllbGQubmFtZV0pID4gZmllbGRfbGVuLmdldChmaWVsZC5uYW1lLCBfTUlOX0ZJRUxEX0xFTik6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbGVuW2ZpZWxkLm5hbWVdID0gbGVuKHJvd1tmaWVsZC5uYW1lXSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgZmllbGQudHR5cGUgaW4gWydkYXRlJywgJ2RhdGV0aW1lJ106XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dbZmllbGQubmFtZV0gPSByZWNvcmRbZmllbGQubmFtZV0uc3RyZnRpbWUoXCIlWS0lbS0lZCAlSDolTTolU1wiKSBpZiByZWNvcmRbZmllbGQubmFtZV0gZWxzZSBcIlwiXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGZpZWxkLnR0eXBlIGluIFsnZmxvYXQnLCAnaW50ZWdlcicsICdtb25ldGFyeSddOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ZpZWxkLm5hbWVdID0gcmVjb3JkW2ZpZWxkLm5hbWVdIGlmIHJlY29yZFtmaWVsZC5uYW1lXSE9Tm9uZSBlbHNlIFwiXCJcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgZmllbGQudHR5cGUgaW4gW1wib25lMm1hbnlcIl0gYW5kIGxlbihmaWVsZC5yZWxhdGVkX2V4dGVybmFsX2ZpZWxkX2lkcykgPiAwOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyByb3dbZmllbGQubmFtZV0gPSBcIixcIi5qb2luKFtzdHIoeC5pZCkgZm9yIHggaW4gcmVjb3JkW2ZpZWxkLm5hbWVdXSkgIyByZWNvcmRbZmllbGQubmFtZV0uaWQgaWYgcmVjb3JkW2ZpZWxkLm5hbWVdIGVsc2UgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N1Yl9kb2NzID0gcmVjb3JkW2ZpZWxkLm5hbWVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3ViX2ZpZWxkcyA9IGZpZWxkLnJlbGF0ZWRfZXh0ZXJuYWxfZmllbGRfaWRzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3ViX21vZGVsID0gc2VsZi5lbnZbJ2lyLm1vZGVsJ10uX2dldChmaWVsZC5maWVsZF9pZC5yZWxhdGlvbilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICMgaWYgX3N1Yl9kb2NzIGFuZCBsZW4oX3N1Yl9kb2NzKSA+IDAgYW5kIF9zdWJfZmllbGRzIGFuZCBsZW4oX3N1Yl9maWVsZHMpID4gMCBhbmQgX3N1Yl9tb2RlbDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIF9zdWJfZmllbGRzIGFuZCBsZW4oX3N1Yl9maWVsZHMpID4gMCBhbmQgX3N1Yl9tb2RlbDogICNcdTRlMGRcdTdiYTFcdTY3MDlcdTZjYTFcdTY3MDlvbmUybWFueVx1OGJiMFx1NWY1NVx1OTBmZFx1NzUxZlx1NjIxMFx1NTE3M1x1ODA1NFx1ODg2OFx1OGJiMFx1NWY1NVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlX2RhdGFfb2JqKHJlcG9ydF9kZWZpbmUsIF9zdWJfbW9kZWwsIF9zdWJfZmllbGRzLCBfc3ViX2RvY3MsIGRhdGFzKSAgICAgI1x1NzUxZlx1NjIxMFx1NTE3M1x1ODA1NFx1ODg2OFx1NzY4NGpzb25cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsaWYgZmllbGQudHR5cGUgaW4gW1wibWFueTJtYW55XCJdIGFuZCBsZW4oZmllbGQucmVsYXRlZF9leHRlcm5hbF9maWVsZF9pZHMpID4gMDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tmaWVsZC5uYW1lXSA9IFwiLFwiLmpvaW4oW3N0cih4LmlkKSBmb3IgeCBpbiByZWNvcmRbZmllbGQubmFtZV1dKSAjIHJlY29yZFtmaWVsZC5uYW1lXS5pZCBpZiByZWNvcmRbZmllbGQubmFtZV0gZWxzZSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfc3ViX2RvY3MgPSByZWNvcmRbZmllbGQubmFtZV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdWJfZmllbGRzID0gZmllbGQucmVsYXRlZF9leHRlcm5hbF9maWVsZF9pZHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdWJfbW9kZWwgPSBzZWxmLmVudlsnaXIubW9kZWwnXS5fZ2V0KGZpZWxkLmZpZWxkX2lkLnJlbGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIyBpZiBfc3ViX2RvY3MgYW5kIGxlbihfc3ViX2RvY3MpID4gMCBhbmQgX3N1Yl9maWVsZHMgYW5kIGxlbihfc3ViX2ZpZWxkcykgPiAwIGFuZCBfc3ViX21vZGVsOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX3N1Yl9maWVsZHMgYW5kIGxlbihfc3ViX2ZpZWxkcykgPiAwIGFuZCBfc3ViX21vZGVsOiAgI1x1NGUwZFx1N2JhMVx1NjcwOVx1NmNhMVx1NjcwOW9uZTJtYW55XHU4YmIwXHU1ZjU1XHU5MGZkXHU3NTFmXHU2MjEwXHU1MTczXHU4MDU0XHU4ODY4XHU4YmIwXHU1ZjU1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX21ha2VfZGF0YV9vYmoocmVwb3J0X2RlZmluZSwgX3N1Yl9tb2RlbCwgX3N1Yl9maWVsZHMsIF9zdWJfZG9jcywgZGF0YXMpICAgICAjXHU3NTFmXHU2MjEwXHU1MTczXHU4MDU0XHU4ODY4XHU3Njg0anNvblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxpZiBmaWVsZC50dHlwZSBpbiBbJ21hbnkyb25lJ106XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dbZmllbGQubmFtZV0gPSByZWNvcmRbZmllbGQubmFtZV0uaWQgaWYgcmVjb3JkW2ZpZWxkLm5hbWVdIGVsc2UgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ZpZWxkLm5hbWUgKyBcIl9uYW1lXCJdID0gcmVjb3JkW2ZpZWxkLm5hbWVdLm5hbWUgaWYgcmVjb3JkW2ZpZWxkLm5hbWVdIGFuZCByZWNvcmRbZmllbGQubmFtZV0ubmFtZSBlbHNlIFwiXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvd1tmaWVsZC5uYW1lICsgXCJfZGlzcGxheV9uYW1lXCJdID0gcmVjb3JkW2ZpZWxkLm5hbWVdLmRpc3BsYXlfbmFtZSBpZiByZWNvcmRbZmllbGQubmFtZV0gYW5kIHJlY29yZFtmaWVsZC5uYW1lXS5kaXNwbGF5X25hbWUgZWxzZSBcIlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4ocm93W2ZpZWxkLm5hbWUgKyBcIl9uYW1lXCJdKSA+IGZpZWxkX2xlbi5nZXQoZmllbGQubmFtZSArIFwiX25hbWVcIiwgX01JTl9GSUVMRF9MRU4pOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkX2xlbltmaWVsZC5uYW1lICsgXCJfbmFtZVwiXSA9IGxlbihyb3dbZmllbGQubmFtZSArIFwiX25hbWVcIl0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiBsZW4ocm93W2ZpZWxkLm5hbWUgKyBcIl9kaXNwbGF5X25hbWVcIl0pID4gZmllbGRfbGVuLmdldChmaWVsZC5uYW1lICsgXCJfZGlzcGxheV9uYW1lXCIsIF9NSU5fRklFTERfTEVOKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9sZW5bZmllbGQubmFtZSArIFwiX2Rpc3BsYXlfbmFtZVwiXSA9IGxlbihyb3dbZmllbGQubmFtZSArIFwiX2Rpc3BsYXlfbmFtZVwiXSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIFx1NjgzOVx1NjM2ZVx1OTAwOVx1NWI5YVx1NzY4NFx1NTE3M1x1ODA1NFx1ODg2OFx1NWI1N1x1NmJiNVx1ZmYwY1x1NzUxZlx1NjIxMFx1NTE3M1x1ODA1NFx1ODg2OFx1NjU3MFx1NjM2ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKGZpZWxkLnJlbGF0ZWRfZXh0ZXJuYWxfZmllbGRfaWRzKSA+IDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N1Yl9kb2NzID0gcmVjb3JkW2ZpZWxkLm5hbWVdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgX3N1Yl9maWVsZHMgPSBmaWVsZC5yZWxhdGVkX2V4dGVybmFsX2ZpZWxkX2lkc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9zdWJfbW9kZWwgPSBzZWxmLmVudlsnaXIubW9kZWwnXS5fZ2V0KGZpZWxkLmZpZWxkX2lkLnJlbGF0aW9uKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICNpZiBfc3ViX2RvY3MgYW5kIGxlbihfc3ViX2RvY3MpID4gMCBhbmQgX3N1Yl9maWVsZHMgYW5kIGxlbihfc3ViX2ZpZWxkcykgPiAwIGFuZCBfc3ViX21vZGVsOiAgI1x1OTcwMFx1ODk4MVx1NjcwOW9uZTJtYW55XHU4YmIwXHU1ZjU1XHU2MjRkXHU3NTFmXHU2MjEwXHU0ZWNlXHU4ODY4XHU4YmIwXHU1ZjU1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgX3N1Yl9maWVsZHMgYW5kIGxlbihfc3ViX2ZpZWxkcykgPiAwIGFuZCBfc3ViX21vZGVsOiAgI1x1NGUwZFx1N2JhMVx1NjcwOVx1NmNhMVx1NjcwOW9uZTJtYW55XHU4YmIwXHU1ZjU1XHU5MGZkXHU3NTFmXHU2MjEwXHU0ZWNlXHU4ODY4XHU4YmIwXHU1ZjU1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9tYWtlX2RhdGFfb2JqKHJlcG9ydF9kZWZpbmUsIF9zdWJfbW9kZWwsIF9zdWJfZmllbGRzLCBfc3ViX2RvY3MsIGRhdGFzLCBmaWVsZCkgICAgICNcdTc1MWZcdTYyMTBcdTUxNzNcdTgwNTRcdTg4NjhcdTc2ODRqc29uXHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGlmIGZpZWxkLnR0eXBlIGluIFsnc2VsZWN0aW9uJ106XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3dbZmllbGQubmFtZV0gPSByZWNvcmRbZmllbGQubmFtZV0gaWYgcmVjb3JkW2ZpZWxkLm5hbWVdIGVsc2UgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX25hbWUgPSBkaWN0KHJlY29yZC5fZmllbGRzW2ZpZWxkLm5hbWVdLl9kZXNjcmlwdGlvbl9zZWxlY3Rpb24ocmVjb3JkLmVudikpLmdldChyb3dbZmllbGQubmFtZV0sICcnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm93W2ZpZWxkLm5hbWUgKyBcIl9uYW1lXCJdID0gX25hbWUgb3IgXCJcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgbGVuKHJvd1tmaWVsZC5uYW1lICsgXCJfbmFtZVwiXSkgPiBmaWVsZF9sZW4uZ2V0KGZpZWxkLm5hbWUgKyBcIl9uYW1lXCIsIF9NSU5fRklFTERfTEVOKTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWVsZF9sZW5bZmllbGQubmFtZSArIFwiX25hbWVcIl0gPSBsZW4ocm93W2ZpZWxkLm5hbWUgKyBcIl9uYW1lXCJdKVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGV4OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfbG9nZ2VyLmVycm9yKF8oXCJcdTc1MWZcdTYyMTBcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdTYyNTNcdTUzNzBcdTY1NzBcdTYzNmVcdTUxZmFcdTk1MTlcdTMwMDJtb2RlbDogJXMsIGZpZWxkOiAlcywgRXJyb3I6ICVzXCIpJShtb2RlbC5tb2RlbCwgZmllbGQubmFtZSwgZXgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXNzXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgcm93OlxyXG4gICAgICAgICAgICAgICAgICAgICNcdTYzOTJcdTk2NjRcdTkxY2RcdTU5MGRcdTc2ODRcdThiYjBcdTVmNTVcclxuICAgICAgICAgICAgICAgICAgICBpZiByb3cuZ2V0KFwiaWRcIikgbm90IGluIFt4LmdldChcImlkXCIpIGZvciB4IGluIGRhdGFzW21vZGVsX25hbWVfZGFzaF1bXCJyb3dzXCJdXTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNbbW9kZWxfbmFtZV9kYXNoXVtcInJvd3NcIl0uYXBwZW5kKHJvdylcclxuXHJcbiAgICAgICAgICAgICMgXHU3NTFmXHU2MjEwXHU2MmE1XHU4ODY4XHU1YjU3XHU2YmI1XHU1YjlhXHU0ZTQ5XHVmZjBjXHU1M2VhXHU1OTA0XHU3NDA2XHU2NzJjXHU3ZWE3bW9kZWxcdTc2ODRcdTViNTdcdTZiYjVcclxuICAgICAgICAgICAgZm9yIGZpZWxkIGluIFtkIGZvciBkIGluIGZpZWxkcyBpZiBkLm1vZGVsX2lkLm1vZGVsID09IG1vZGVsLm1vZGVsXTpcclxuICAgICAgICAgICAgICAgIF90eXBlID0gX2NvbnZlcnRfZmllbGRfdHlwZShmaWVsZClcclxuXHJcbiAgICAgICAgICAgICAgICBfbGVuID0gX01JTl9GSUVMRF9MRU5cclxuICAgICAgICAgICAgICAgIGlmIF90eXBlID09IFwic3RyXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbiA9IGZpZWxkX2xlbi5nZXQoZmllbGQubmFtZSwgX01JTl9GSUVMRF9MRU4pICAjIFx1NTNlYVx1NjcwOXN0clx1N2M3Ylx1NTc4Ylx1NzY4NFx1NTdmYVx1NjcyY1x1NWI1N1x1NmJiNVx1NjI0ZFx1OGJiZVx1N2Y2ZVx1OTU3Zlx1NWVhNlxyXG4gICAgICAgICAgICAgICAgaWYgX3R5cGUgPT0gXCJ0ZXh0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgX2xlbiA9IGZpZWxkX2xlbi5nZXQoZmllbGQubmFtZSwgX01JTl9GSUVMRF9MRU4pICAjIFx1NTNlYVx1NjcwOXN0clx1N2M3Ylx1NTc4Ylx1NzY4NFx1NTdmYVx1NjcyY1x1NWI1N1x1NmJiNVx1NjI0ZFx1OGJiZVx1N2Y2ZVx1OTU3Zlx1NWVhNlxyXG4gICAgICAgICAgICAgICAgICAgIF90eXBlID09IFwic3RyXCJcclxuXHJcbiAgICAgICAgICAgICAgICBkYXRhc1ttb2RlbF9uYW1lX2Rhc2hdW1wiY29sc1wiXS5hcHBlbmQoICB7IFwidHlwZVwiOiBfdHlwZSwgXCJzaXplXCI6IF9sZW4sIFwibmFtZVwiOiBmaWVsZC5uYW1lLCBcInJlcXVpcmVkXCI6IEZhbHNlLCBcImNvbW1lbnRcIjogZmllbGQuZmllbGRfZGVzY3JpcHRpb24gfSApXHJcblxyXG4gICAgICAgICAgICAgICAgIyAjXHU4M2I3XHU1M2Q2bWFueTJvbmVcdTViNTdcdTZiYjVcdTc2ODRcdTUxNzNcdTgwNTRcdTg4NjhcdTViNTdcdTZiYjVcclxuICAgICAgICAgICAgICAgICMgaWYgZmllbGQudHR5cGUgaW4gW1wibWFueTJvbmVcIl06XHJcbiAgICAgICAgICAgICAgICBpZiBmaWVsZC50dHlwZSBpbiBbXCJvbmUybWFueVwiLCBcIm1hbnkybWFueVwiXTpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhc1ttb2RlbF9uYW1lX2Rhc2hdW1wiY29sc1wiXS5hcHBlbmQoIHtcInR5cGVcIjogXCJzdHJcIiwgXCJzaXplXCI6IGZpZWxkX2xlbi5nZXQoZmllbGQubmFtZSwgX01JTl9GSUVMRF9MRU4pLCBcIm5hbWVcIjogZmllbGQubmFtZSsgXCJfaWRzXCIsIFwicmVxdWlyZWRcIjogRmFsc2UsIFwiY29tbWVudFwiOiBmaWVsZC5maWVsZF9kZXNjcmlwdGlvbn0pXHJcblxyXG4gICAgICAgICAgICAgICAgaWYgZmllbGQudHR5cGUgaW4gW1wibWFueTJvbmVcIl06XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YXNbbW9kZWxfbmFtZV9kYXNoXVtcImNvbHNcIl0uYXBwZW5kKCB7XCJ0eXBlXCI6IFwic3RyXCIsIFwic2l6ZVwiOiBmaWVsZF9sZW4uZ2V0KGZpZWxkLm5hbWUgKyBcIl9uYW1lXCIsIF9NSU5fRklFTERfTEVOKSwgXCJuYW1lXCI6IGZpZWxkLm5hbWUrIFwiX25hbWVcIiwgXCJyZXF1aXJlZFwiOiBGYWxzZSwgXCJjb21tZW50XCI6IGZpZWxkLmZpZWxkX2Rlc2NyaXB0aW9ufSlcclxuICAgICAgICAgICAgICAgICAgICBkYXRhc1ttb2RlbF9uYW1lX2Rhc2hdW1wiY29sc1wiXS5hcHBlbmQoe1widHlwZVwiOiBcInN0clwiLCBcInNpemVcIjogZmllbGRfbGVuLmdldChmaWVsZC5uYW1lICsgXCJfZGlzcGxheV9uYW1lXCIsIF9NSU5fRklFTERfTEVOKSwgXCJuYW1lXCI6IGZpZWxkLm5hbWUgKyBcIl9kaXNwbGF5X25hbWVcIixcInJlcXVpcmVkXCI6IEZhbHNlLCBcImNvbW1lbnRcIjogZmllbGQuZmllbGRfZGVzY3JpcHRpb259KVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIGZpZWxkLnR0eXBlIGluIFtcInNlbGVjdGlvblwiXTpcclxuICAgICAgICAgICAgICAgICAgICBkYXRhc1ttb2RlbF9uYW1lX2Rhc2hdW1wiY29sc1wiXS5hcHBlbmQoIHtcInR5cGVcIjogXCJzdHJcIiwgXCJzaXplXCI6IGZpZWxkX2xlbi5nZXQoZmllbGQubmFtZSArIFwiX25hbWVcIiwgX01JTl9GSUVMRF9MRU4pLCBcIm5hbWVcIjogZmllbGQubmFtZSsgXCJfbmFtZVwiLCBcInJlcXVpcmVkXCI6IEZhbHNlLCBcImNvbW1lbnRcIjogZmllbGQuZmllbGRfZGVzY3JpcHRpb259KVxyXG5cclxuICAgICAgICAgICAgZGF0YXNbbW9kZWxfbmFtZV9kYXNoXVtcImNvbHNcIl0gPSBfcmVtb3ZlX2R1cGxpY2F0ZWQoZGF0YXNbbW9kZWxfbmFtZV9kYXNoXVtcImNvbHNcIl0pICAjIFx1NTNiYlx1OTY2NFx1OTFjZFx1NTkwZFx1NmRmYlx1NTJhMFx1NzY4NFx1NWI1N1x1NmJiNVxyXG5cclxuICAgICAgICAgICAgZW5kID0gdGltZS50aW1lKClcclxuICAgICAgICAgICAgcHJpbnQoXCJfbWFrZV9kYXRhX29ialslc10gY29uc3VtZTogJWZcIiAlIChtb2RlbF9uYW1lX2Rhc2gsIChlbmQgLSBzdGFydCkpKVxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YXNcclxuXHJcbiAgICAgICAgICAgICMjIFx1NGVlNVx1NGUwYVx1NTE4NVx1OTBlOFx1NTFmZFx1NjU3MFxyXG5cclxuICAgICAgICByZXBvcnRfZGVmaW5lID0gdmFsdWVzLmdldChcInJlcG9ydF9kZWZpbmVcIilcclxuICAgICAgICBtYWNoaW5lX2NvZGUgPSBBRVNDb2Rlci5nZXRfbWFjaGluZV9jb2RlKCkgb3IgJycgICMgR2V0IG1hY2hpbmUgY29kZVxyXG4gICAgICAgICMgcHJpbnRfY29waWVzID0gdmFsdWVzLmdldChcInByaW50X2NvcGllc1wiLCAxKVxyXG4gICAgICAgIHByaW50X29iaiA9IHtcclxuICAgICAgICAgICAgXCJ0ZW1wbGF0ZVwiOiBcIlwiLFxyXG4gICAgICAgICAgICBcInZlclwiOiA0LFxyXG4gICAgICAgICAgICBcIkNvcGllc1wiOiB2YWx1ZXMuZ2V0KFwicHJpbnRfY29waWVzXCIsIDEpLCAgI1x1NjI1M1x1NTM3MFx1NGVmZFx1NjU3MFx1ZmYwY1x1OWVkOFx1OGJhNFx1NjYyZjFcclxuICAgICAgICAgICAgXCJEdXBsZXhcIjogMCxcclxuICAgICAgICAgICAgXCJtY29kZVwiOiBtYWNoaW5lX2NvZGUsXHJcbiAgICAgICAgICAgIFwiVGFibGVzXCI6IFtdXHJcbiAgICAgICAgfVxyXG4gICAgICAgICMgXHU4YmJlXHU3ZjZlXHU2MjUzXHU1MzcwXHU2NzNhXHJcbiAgICAgICAgaWYgcmVwb3J0X2RlZmluZS5wcmludGVyX2lkIGFuZCByZXBvcnRfZGVmaW5lLnByaW50ZXJfaWQgIT0gJyc6XHJcbiAgICAgICAgICAgIHByaW50X29ialtcInByaW50ZXJcIl0gPSByZXBvcnRfZGVmaW5lLnByaW50ZXJfaWQubmFtZVxyXG5cclxuICAgICAgICBfaXNfZGVzaWduID0gc2VsZi5fY29udGV4dC5nZXQoXCJpc19kZXNpZ25cIiwgRmFsc2UpXHJcbiAgICAgICAgaWYgX2lzX2Rlc2lnbjpcclxuICAgICAgICAgICAgcHJpbnRfb2JqW1wiZGVzaWduXCJdID0gVHJ1ZVxyXG4gICAgICAgICAgICBzaG93X21lc3NhZ2UgPSBTSE9XX01FU1NBSEVfVEVNUEwgJSAoXyhcIlwiXCJcdThiZjdcdTU3MjhcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdThiYmVcdThiYTFcdTU2NjhcdThiYmVcdThiYTFcdTYyYTVcdTg4NjhcdTMwMDI8YnIvPlxyXG4gICAgICAgICAgICBcdTU5ODJcdTY3OWNcdTYyYTVcdTg4NjhcdThiYmVcdThiYTFcdTU2NjhcdTY3MmFcdTYyNTNcdTVmMDBcdWZmMGNcdThiZjdcdTY4YzBcdTY3ZTVcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdTY2MmZcdTU0MjZcdTVkZjJcdTU0MmZcdTUyYThcdWZmMDE8YnIvPjxici8+PGJyLz5cclxuICAgICAgICAgICAgXHU2YTIxXHU2NzdmXHU4YmJlXHU4YmExXHU1YjhjXHU2MjEwXHU1NDBlXHVmZjBjXHU4YmY3XHU1NzI4b2Rvb1x1ODNkY1x1NTM1NVx1MjAxY1x1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2OFx1MjAxZC0tJmd0O1x1MjAxY1x1NmEyMVx1Njc3Zlx1MjAxZFx1ODNkY1x1NTM1NVx1NGUyZFx1ZmYwY1x1NjI1M1x1NWYwMFx1NmEyMVx1Njc3Zlx1OGJiMFx1NWY1NVx1NGUwYVx1NGYyMFx1NjIxNlx1NjZmNFx1NjViMFx1NmEyMVx1Njc3Zlx1ZmYwMTxici8+PGJyLz5cclxuICAgICAgICAgICAgPGEgaHJlZj1cXFwiY2ZwcmludDovL29wZW5cXFwiPlx1NTQyZlx1NTJhOFx1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2ODwvYT5cclxuICAgICAgICAgICAgXCJcIlwiKSlcclxuICAgICAgICAgICAgdmFsdWVzLnVwZGF0ZSggc2hvd19tZXNzYWdlPXNob3dfbWVzc2FnZSApXHJcblxyXG4gICAgICAgIGlmIHJlcG9ydF9kZWZpbmUudXNlX2NsaWVudF90ZW1wbCBhbmQgcmVwb3J0X2RlZmluZS5jbGllbnRfdGVtcGxfbmFtZTpcclxuICAgICAgICAgICAgcHJpbnRfb2JqW1widGVtcGxhdGVcIl0gPSByZXBvcnRfZGVmaW5lLmNsaWVudF90ZW1wbF9uYW1lXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgaWYgbm90IHJlcG9ydF9kZWZpbmUudGVtcGxhdGVfaWQgb3Igbm90IHJlcG9ydF9kZWZpbmUudGVtcGxhdGVfaWQudGVtcGxfaWQ6XHJcbiAgICAgICAgICAgICAgICB2YWx1ZXMudXBkYXRlKCAgc2hvd19tZXNzYWdlID0gU0hPV19NRVNTQUhFX1RFTVBMJShfKFwiXHU2NzJhXHU2MzA3XHU1YjlhXHU4OTgxXHU2MjUzXHU1MzcwXHU3Njg0XHU2MmE1XHU4ODY4XHU2YTIxXHU2NzdmXHVmZjBjXHU4YmY3XHU1MTQ4XHU2MzA3XHU1YjlhXHU2MmE1XHU4ODY4XHU2YTIxXHU2NzdmXHUzMDAyXCIpICkpXHJcbiAgICAgICAgICAgIHRlbXBsX2RhdGEgPSBzZWxmLmVudlsnY2YudGVtcGxhdGUnXS5zZWFyY2goWygndGVtcGxfaWQnLCAnPScsIHJlcG9ydF9kZWZpbmUudGVtcGxhdGVfaWQudGVtcGxfaWQpXSwgbGltaXQ9MSkudGVtcGxhdGVcclxuICAgICAgICAgICAgaWYgbm90IHRlbXBsX2RhdGEgb3IgdGVtcGxfZGF0YT09XCJcIjpcclxuICAgICAgICAgICAgICAgIGlmIG5vdCBfaXNfZGVzaWduOlxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy51cGRhdGUoIHNob3dfbWVzc2FnZSA9IFNIT1dfTUVTU0FIRV9URU1QTCUoXyhcIlx1NjMwN1x1NWI5YVx1NzY4NFx1NjJhNVx1ODg2OFx1NmEyMVx1Njc3Zlx1NjcyYVx1NWI5YVx1NGU0OVx1NjIxNlx1NmEyMVx1Njc3Zlx1NjVlMFx1NTE4NVx1NWJiOVx1ZmYwY1x1OGJmN1x1NTE0OFx1OGJiZVx1OGJhMVx1NmEyMVx1Njc3Zlx1NWU3Nlx1NjZmNFx1NjViMFx1NTIzMFx1NmEyMVx1Njc3Zlx1OGJiMFx1NWY1NVx1ODg2OFx1MzAwMjwvaDM+XCIpKSApXHJcbiAgICAgICAgICAgICAgICBlbHNlOlxyXG4gICAgICAgICAgICAgICAgICAgIHByaW50X29ialtcInRlbXBsYXRlXCJdID0gXCJjZl90ZW1wbF8lc1wiICUgKHJlcG9ydF9kZWZpbmUubmFtZS5yZXBsYWNlKCcuJywgJ18nKSlcclxuICAgICAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgICAgIHByaW50X29ialtcInRlbXBsYXRlXCJdID0gXCJiYXNlNjQ6XCIgKyB0ZW1wbF9kYXRhLnN0cmlwKCkuZGVjb2RlKFwiVVRGLThcIikucmVwbGFjZShcIlxcblwiLCBcIlwiKVxyXG5cclxuICAgICAgICBkb2NzID0gdmFsdWVzLmdldChcImRvY3NcIilcclxuICAgICAgICBpZiBub3QgZG9jcyBvciBsZW4oZG9jcyk8MTpcclxuICAgICAgICAgICAgYWN0aXZlX2lkcyA9IHNlbGYuX2NvbnRleHQuZ2V0KFwiYWN0aXZlX2lkc1wiLCBbXSlcclxuICAgICAgICAgICAgZG9jcyA9IHNlbGYuZW52W3JlcG9ydF9kZWZpbmUubW9kZWxfaWQubW9kZWxdLmJyb3dzZShhY3RpdmVfaWRzKVxyXG5cclxuICAgICAgICBkYXRhcyA9IHt9XHJcbiAgICAgICAgc3RhcnQgPSB0aW1lLnRpbWUoKVxyXG4gICAgICAgIF9tYWtlX2RhdGFfb2JqKHJlcG9ydF9kZWZpbmUsIHJlcG9ydF9kZWZpbmUubW9kZWxfaWQsIHJlcG9ydF9kZWZpbmUuZmllbGRfaWRzLCBkb2NzLCBkYXRhcylcclxuICAgICAgICBlbmQgPSB0aW1lLnRpbWUoKVxyXG4gICAgICAgIHByaW50KFwiX21ha2VfZGF0YV9vYmogY29uc3VtZTogICVmXCIlKGVuZCAtIHN0YXJ0KSlcclxuXHJcbiAgICAgICAgIyBcdTY1NzBcdTYzNmVcdTU0MDhcdTVlNzZcdTUyMzBcdTYwM2JcdTc2ODRcdTY1NzBcdTYzNmVcdTViZjlcdThjNjFcclxuICAgICAgICBmb3IgaSwgKG1vZGVsX25hbWUsIHYpIGluIGVudW1lcmF0ZShkYXRhcy5pdGVtcygpKTpcclxuICAgICAgICAgICAgIyB0YWJsZU5hbWUgPSBzdHJpbmcuY2Fwd29yZHMobW9kZWxfbmFtZSkucmVwbGFjZShcIi5cIixcIl9cIilcclxuICAgICAgICAgICAgdGFibGVOYW1lID0gbW9kZWxfbmFtZS5yZXBsYWNlKFwiLlwiLCBcIl9cIilcclxuICAgICAgICAgICAgY29scyA9IHZbXCJjb2xzXCJdXHJcbiAgICAgICAgICAgIHJvd3MgPSB2W1wicm93c1wiXVxyXG4gICAgICAgICAgICBwcmludF9vYmpbXCJUYWJsZXNcIl0uYXBwZW5kKHtcclxuICAgICAgICAgICAgICAgIFwiTmFtZVwiOiB0YWJsZU5hbWUsXHJcbiAgICAgICAgICAgICAgICBcIkNvbHNcIjogY29scyxcclxuICAgICAgICAgICAgICAgIFwiRGF0YVwiOiByb3dzLFxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICByZXR1cm4gcHJpbnRfb2JqXHJcblxyXG4gICAgZGVmIF9zZXRfcmVwb3J0X2RhdGEoc2VsZiwgdmFsdWVzLCByZXBvcnRfZGF0YSk6XHJcbiAgICAgICAgXCJcIlwiXHU2MjhhXHU3NTFmXHU2MjEwXHU3Njg0XHU2MmE1XHU4ODY4XHU2NTcwXHU2MzZlXHU2ZTMyXHU2N2QzXHU1MjMwcXdlYlx1NmEyMVx1Njc3Zlx1NWY2Mlx1NjIxMEhUTUxcdTY4M2NcdTVmMGZcdTYyYTVcdTg4NjhcIlwiXCJcclxuXHJcbiAgICAgICAgcmVwb3J0X2RlZmluZSA9IHZhbHVlcy5nZXQoXCJyZXBvcnRfZGVmaW5lXCIpXHJcblxyXG4gICAgICAgIF9hZGRyZXNzID0gXCIxMjcuMC4wLjFcIlxyXG4gICAgICAgIF9wb3J0ID0gNTQzMjFcclxuICAgICAgICBfcHJuX21hcHBpbmcgPSBzZWxmLmVudltcImNmLnByaW50LnNlcnZlci51c2VyLm1hcHBpbmdcIl0uc2VhcmNoKFsoJ3VzZXJfaWQnLCAnPScsIHNlbGYuZW52LnVzZXIuaWQpXSwgbGltaXQ9MSlcclxuICAgICAgICBpZiBfcHJuX21hcHBpbmcgYW5kIF9wcm5fbWFwcGluZy5wcm5fc2VydmVyX2lwOlxyXG4gICAgICAgICAgICBfYWRkcmVzcyA9IF9wcm5fbWFwcGluZy5wcm5fc2VydmVyX2lwXHJcbiAgICAgICAgICAgIGlmIF9wcm5fbWFwcGluZy5wcm5fc2VydmVyX3BvcnQgYW5kIF9wcm5fbWFwcGluZy5wcm5fc2VydmVyX3BvcnQ+MCBhbmQgX3Bybl9tYXBwaW5nLnBybl9zZXJ2ZXJfcG9ydDw2NTUzNTogX3BvcnQgPSBfcHJuX21hcHBpbmcucHJuX3NlcnZlcl9wb3J0XHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgX2FkZHJlc3MgPSByZXBvcnRfZGVmaW5lLnBybl9zZXJ2ZXJfYWRkcmVzcyBvciBcIjEyNy4wLjAuMVwiXHJcbiAgICAgICAgICAgIF9wb3J0ID0gcmVwb3J0X2RlZmluZS5wcm5fc2VydmVyX3BvcnQgaWYgcmVwb3J0X2RlZmluZS5wcm5fc2VydmVyX3BvcnQgYW5kIHJlcG9ydF9kZWZpbmUucHJuX3NlcnZlcl9wb3J0PjAgYW5kIHJlcG9ydF9kZWZpbmUucHJuX3NlcnZlcl9wb3J0PDY1NTM1IGVsc2UgNTQzMjFcclxuXHJcbiAgICAgICAgIyBcdTYyOGFcdTY1NzBcdTYzNmVcdThmNmNcdTYyMTBqc29uXHU1YmY5XHU4YzYxXHJcbiAgICAgICAganNvbl9zY3JpcHRzID0gW1xyXG4gICAgICAgICAgICAndmFyIGNmcHJpbnRfYWRkciA9IFxcXCIlc1xcXCInJShfYWRkcmVzcyksXHJcbiAgICAgICAgICAgICd2YXIgY2ZwcmludF9wb3J0ID0gJWQnJShfcG9ydCksXHJcbiAgICAgICAgICAgIFwidmFyIF9kZWxheV9jbG9zZSA9IC0xXCJcclxuICAgICAgICBdXHJcbiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnRHVtcCByZXBvcnQgZGF0YSB0byBqc29uLi4uJylcclxuICAgICAgICBfcmVwb3J0X2RhdGFfcGxhaW4gPSBqc29uLmR1bXBzKHJlcG9ydF9kYXRhLCBlbnN1cmVfYXNjaWk9RmFsc2UpXHJcblxyXG4gICAgICAgICMgXHU1MmEwXHU1YmM2XHU2NTcwXHU2MzZlXHJcbiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnRW5jcnlwdCByZXBvcnQgZGF0YS4uLicpXHJcbiAgICAgICAga2V5ID0gQUVTQ29kZXIucmFuZF9hZXNfa2V5KDE2LCBGYWxzZSlcclxuICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiQUVTIEtleTogJXNcIiUoa2V5KSlcclxuICAgICAgICBhZXMgPSBBRVNDb2RlcihrZXksIEFFUy5NT0RFX0NCQylcclxuICAgICAgICBzdGFydCA9IHRpbWUudGltZSgpXHJcbiAgICAgICAgX3JlcG9ydF9kYXRhX2VuY3J5cHRlZCA9IGFlcy5lbmNyeXB0KF9yZXBvcnRfZGF0YV9wbGFpbilcclxuICAgICAgICBlbmQgPSB0aW1lLnRpbWUoKVxyXG4gICAgICAgIHByaW50KFwiRW5jcnlwdCBjb25zdW1lOiAlZlwiJShlbmQgLSBzdGFydCkpXHJcblxyXG4gICAgICAgICMgXHU1MmEwXHU1YmM2XHU1YmM2XHU3ODAxXHJcbiAgICAgICAgX2xvZ2dlci5kZWJ1ZygnRW5jcnlwdCBrZXkuLi4nKVxyXG4gICAgICAgICMgRklYTUU6IFx1OGZkOVx1OTFjY1x1NzY4NFx1NWJjNlx1NzgwMVx1NTJhMFx1NWJjNlx1NjcwMFx1NTQwZVx1ODk4MVx1NjUzOVx1NjIxMFx1NGUwZFx1NWJmOVx1NzlmMFx1NTJhMFx1NWJjNlx1ZmYwY1x1NzUzMVx1NGU4ZURlbHBoaVx1NTQ4Y1B5dGhvblx1NGU0Ylx1OTVmNFx1NzY4NFx1NGU5Mlx1ODllM1x1NWJjNlx1OTVlZVx1OTg5OFx1OTZiZVx1NGVlNVx1ODllM1x1NTFiM1x1ZmYwY1x1NjY4Mlx1NjVmNlx1NTE0OFx1NTNlYVx1NWJmOVx1NWJjNlx1NzgwMVx1OGZkYlx1ODg0Y0Jhc2U2NFx1NTkwNFx1NzQwNlxyXG4gICAgICAgICMgcnNhID0gUlNBQ2lwaGVyKClcclxuICAgICAgICAjIF9rZXlfZW5jcnlwdGVkID0gcnNhLmVuY3J5cHRfc3RyKGtleSlcclxuICAgICAgICAjIGFlcyA9IEFFU0NvZGVyKCcnLmpvaW4oVE9LRU5fQ1JZUFRfS0VZKSwgQUVTLk1PREVfQ0JDKVxyXG4gICAgICAgIGFlcyA9IEFFU0NvZGVyKGdldF9fKCksIEFFUy5NT0RFX0NCQylcclxuICAgICAgICBfa2V5X2VuY3J5cHRlZCA9IGFlcy5lbmNyeXB0KGtleSlcclxuXHJcbiAgICAgICAgZmluYWxfZGF0YSA9IHtcclxuICAgICAgICAgICAgXCJ0b2tlblwiOiBfa2V5X2VuY3J5cHRlZC5kZWNvZGUoXCJ1dGYtOFwiKSxcclxuICAgICAgICAgICAgXCJkZWFcIjogXCJhZXNcIiwgICAgICAgICNcdTY1NzBcdTYzNmVcdTUyYTBcdTViYzZcdTY1YjlcdTZjZDUsIERhdGEgRW5jcnlwdCBBbGdvcml0aG1cclxuICAgICAgICAgICAgXCJ0ZWFcIjogXCJhZXNcIiwgICAgICAgICNUb2tlblx1NTJhMFx1NWJjNlx1NjViOVx1NmNkNSwgVG9rZW4gRW5jcnlwdCBBbGdvcml0aG1cclxuICAgICAgICAgICAgXCJkYXRhXCI6IF9yZXBvcnRfZGF0YV9lbmNyeXB0ZWQuZGVjb2RlKFwidXRmLThcIilcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIF9sb2dnZXIuZGVidWcoJ0R1bXAgZmluYWxfZGF0YS4uLicpXHJcbiAgICAgICAgIyBqc29uX3NjcmlwdHMuYXBwZW5kKFwidmFyIF9kYXRhID0gJXNcIiUoanNvbi5kdW1wcyhyZXBvcnRfZGF0YSkpKVxyXG4gICAgICAgIGpzb25fc2NyaXB0cy5hcHBlbmQoXCJ2YXIgX2RhdGEgPSAlc1wiICUgKGpzb24uZHVtcHMoZmluYWxfZGF0YSwgZW5zdXJlX2FzY2lpPUZhbHNlKSkpXHJcblxyXG4gICAgICAgIGpzb25fc2NyaXB0cy5hcHBlbmQoXCJcIlwiX3JlcG9ydERhdGEgPSBKU09OLnN0cmluZ2lmeShfZGF0YSk7XFxuY29uc29sZS5sb2coX3JlcG9ydERhdGEpO1wiXCJcIilcclxuXHJcbiAgICAgICAgIyBcdTU5ODJcdTY3OWNcdTYzMDdcdTViOWFcdTRlODZcdTYyNTNcdTUzNzBcdTViOGNcdTYyMTBcdTU0MGVcdThmZDRcdTU2ZGVcdTRlMGFcdTRlMDBcdTk4NzVcdWZmMGNcdTUyMTlcdTU4OWVcdTUyYTBcdThmZDRcdTU2ZGVcdTRlMGFcdTRlMDBcdTk4NzVcdTc2ODRKU1xyXG4gICAgICAgIGlmIHJlcG9ydF9kZWZpbmUuYmFja19hZnRlcl9wcmludDpcclxuICAgICAgICAgICAganNvbl9zY3JpcHRzLmFwcGVuZChcIlwiXCJcclxuICAgICAgICAgICAgZnVuY3Rpb24gX2RlbGF5KG1zKSB7IHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTsgfSBcXG4gXHJcbiAgICAgICAgICAgIF9kZWxheSgxMDAwKS50aGVuKCgpID0+IHdpbmRvdy5oaXN0b3J5LmdvKC0xKSk7ICAvKlx1NWVmNlx1OGZkZlx1NGUwMFx1NzlkMlx1NTQwZVx1OGZkNFx1NTZkZVx1NTIzMFx1NGUwYVx1NGUwMFx1OTg3NSovXCJcIlwiKVxyXG4gICAgICAgIGpzb25fZGF0YSA9IFwiO1xcblwiLmpvaW4oanNvbl9zY3JpcHRzKVxyXG4gICAgICAgIF9sb2dnZXIuZGVidWcoJ2pzb25fZGF0YTogJXMgLi4uJyUoanNvbl9kYXRhWzA6IDMwMF0pKSAgI1x1NTNkNlx1NTI0ZDMwMFx1NGUyYVx1NWI1N1x1N2IyNlx1OGY5M1x1NTFmYVx1NTIzMFx1NjVlNVx1NWZkN1x1ZmYwY1x1NTk4Mlx1Njc5Y1x1NTE2OFx1OTBlOFx1OGY5M1x1NTFmYVx1NTIzMFx1NjVlNVx1NWZkN1x1NTkyYVx1NTkxYVx1NGU4NlxyXG5cclxuICAgICAgICB2YWx1ZXMudXBkYXRlKFxyXG4gICAgICAgICAgICBjZnByaW50X2pzb249anNvbl9kYXRhLFxyXG4gICAgICAgIClcclxuXHJcbiAgICAjIEBhcGkubXVsdGlcclxuICAgIGRlZiByZW5kZXIoc2VsZiwgdGVtcGxhdGUsIHZhbHVlcz1Ob25lKTpcclxuICAgICAgICBcIlwiXCJcclxuICAgICAgICBcdTdlZTdcdTYyN2ZyZXBvcnRcdTViZjlcdThjNjFcdTc2ODRcdTZlMzJcdTY3ZDNcdTY1YjlcdTZjZDVcdWZmMGNcdTU3MjhcdTRlMGFcdTRlMGJcdTY1ODdcdTRlMmRcdTU4OWVcdTUyYTBcdTZhMjFcdTY3N2ZcdTViZjlcdThjNjFPUk1cclxuICAgICAgICA6cGFyYW0gdGVtcGxhdGU6XHJcbiAgICAgICAgOnBhcmFtIHZhbHVlczpcclxuICAgICAgICA6cmV0dXJuOlxyXG4gICAgICAgIFwiXCJcIlxyXG4gICAgICAgIGlmIHZhbHVlcyBpcyBOb25lOlxyXG4gICAgICAgICAgICB2YWx1ZXMgPSB7fVxyXG5cclxuICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiUmVuZGVyIHJlcG9ydC4uLlwiKVxyXG4gICAgICAgIHJlcG9ydCA9IHNlbGYuX2dldF9yZXBvcnRfZnJvbV9uYW1lKHRlbXBsYXRlKVxyXG4gICAgICAgIGlmIG5vdCByZXBvcnQ6XHJcbiAgICAgICAgICAgIHJhaXNlIEFjY2Vzc0Vycm9yKF8oXCJcdTY3MmFcdTYyN2VcdTUyMzBcdTYyYTVcdTg4NjhcdWZmMDglc1x1ZmYwOVx1NWI5YVx1NGU0OVx1ZmYwY1x1NTNlZlx1ODBmZFx1NjYyZlx1NjJhNVx1ODg2OFx1NjcyYVx1NWI5YVx1NGU0OVx1NjIxNlx1NWI5YVx1NGU0OVx1NjcyYVx1NzUxZlx1NjU0OFx1ZmYwY1x1NTk4Mlx1Njc5Y1x1NGY3Zlx1NzUyOFx1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2OFx1ZmYwY1x1OGJmN1x1NTcyOFx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVx1NGUyZFx1OTFjZFx1NjViMFx1NzUxZlx1NjIxMFx1NGUwMFx1NGUwYlx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVx1ZmYwMVwiICUgKHRlbXBsYXRlKSkpXHJcblxyXG4gICAgICAgIHNob3dfbWVzc2FnZSA9IFNIT1dfTUVTU0FIRV9URU1QTCUoXyhcIlx1NmI2M1x1NTcyOFx1NjI1M1x1NTM3MFx1ZmYwY1x1OGJmN1x1N2EwZFx1NTAxOS4uLjxici8+PGJyLz5cdTU5ODJcdTY3OWNcdTYyNTNcdTUzNzBcdTY3M2FcdTY3MmFcdThmOTNcdTUxZmFcdTYyYTVcdTg4NjhcdWZmMGNcdThiZjdcdTY4YzBcdTY3ZTVcdTVlYjdcdTg2NGVcdTRlOTFcdTYyYTVcdTg4NjhcdTY2MmZcdTU0MjZcdTVkZjJcdTU0MmZcdTUyYThcdWZmMDE8YnIvPjxici8+PGEgaHJlZj1cXFwiY2ZwcmludDovL29wZW5cXFwiPlx1NTQyZlx1NTJhOFx1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2ODwvYT5cIikpXHJcblxyXG4gICAgICAgIF9sb2dnZXIuZGVidWcoXCJQcmVwYXJlIGRvY3MuLi5cIilcclxuICAgICAgICBkb2NzID0gdmFsdWVzLmdldChcImRvY3NcIiwgRmFsc2UpXHJcbiAgICAgICAgaWYgbm90IGRvY3Mgb3IgbGVuKGRvY3MpPDE6XHJcbiAgICAgICAgICAgIGFjdGl2ZV9pZHMgPSBzZWxmLl9jb250ZXh0LmdldChcImFjdGl2ZV9pZHNcIiwgW10pXHJcbiAgICAgICAgICAgIGRvY3MgPSBzZWxmLmVudltyZXBvcnQubW9kZWxdLmJyb3dzZShhY3RpdmVfaWRzKVxyXG4gICAgICAgICAgICB2YWx1ZXMudXBkYXRlKCBkb2NzID0gZG9jcyApXHJcbiAgICAgICAgaWYgbm90IGRvY3Mgb3IgbGVuKGRvY3MpPDE6XHJcbiAgICAgICAgICAgIHNob3dfbWVzc2FnZSA9IFNIT1dfTUVTU0FIRV9URU1QTCUoXyhcIlx1NmNhMVx1NjcwOVx1NTNlZlx1NGVlNVx1NjI1M1x1NTM3MFx1NjU3MFx1NjM2ZVx1MzAwMlwiKSlcclxuXHJcbiAgICAgICAgX2xvZ2dlci5kZWJ1ZyhcIlJldHJpZXZlIHJlcG9ydCBkZWZpbmUuLi5cIilcclxuICAgICAgICAjXHU4OWUzXHU2NzkwXHU2MmE1XHU4ODY4XHU1YjlhXHU0ZTQ5SURcclxuICAgICAgICBycHRfZGVmaW5kX25hbWUgPSByZXBvcnQueG1sX2lkLnNwbGl0KFwiLlwiKVxyXG4gICAgICAgIGlmIGxlbihycHRfZGVmaW5kX25hbWUpPjE6XHJcbiAgICAgICAgICAgIHJwdF9kZWZpbmRfbmFtZSA9IHJwdF9kZWZpbmRfbmFtZVsxXS5yZXBsYWNlKFJFUE9SVF9JRF9QRVJGSVgsIFwiXCIpXHJcbiAgICAgICAgZWxzZTpcclxuICAgICAgICAgICAgcnB0X2RlZmluZF9uYW1lID0gcnB0X2RlZmluZF9uYW1lWzBdLnJlcGxhY2UoUkVQT1JUX0lEX1BFUkZJWCwgXCJcIilcclxuXHJcbiAgICAgICAgdmFsdWVzLnVwZGF0ZShcclxuICAgICAgICAgICAgc2hvd19tZXNzYWdlPXNob3dfbWVzc2FnZVxyXG4gICAgICAgIClcclxuXHJcbiAgICAgICAgIyBcdTY4MzlcdTYzNmVcdTYyYTVcdTg4NjhcdTViOWFcdTRlNDlJRFx1NjdlNVx1OGJlMlx1NjJhNVx1ODg2OFx1NWI5YVx1NGU0OVxyXG4gICAgICAgIHJwdF9kZWZpbmUgPSBzZWxmLmVudltcImNmLnJlcG9ydC5kZWZpbmVcIl0uc2VhcmNoKFsoJ25hbWUnLCAnPScsIHJwdF9kZWZpbmRfbmFtZSldLCBsaW1pdD0xKVxyXG5cclxuICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiUHJlcGFyZSB0byBtYWtlIGpzb24uLi5bJXNdXCIgJSAocnB0X2RlZmluZF9uYW1lKSlcclxuICAgICAgICBpZiBycHRfZGVmaW5lOlxyXG4gICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiU2V0IHJlcG9ydF9kZWZpbmUgdG8gdmFsdWVzLi4uXCIpXHJcbiAgICAgICAgICAgIHZhbHVlcy51cGRhdGUoICByZXBvcnRfZGVmaW5lPXJwdF9kZWZpbmUsIClcclxuICAgICAgICAgICAgX2xvZ2dlci5kZWJ1ZyhcIkJlZ2luIHRvIG1ha2UgcmVwb3J0IGRhdGEgLi4uXCIpXHJcbiAgICAgICAgICAgIHJlcG9ydF9kYXRhID0gc2VsZi5fbWFrZV9jZnByaW50X2pzb24odmFsdWVzKVxyXG4gICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiQmVnaW4gdG8gY29udmVydCByZXBvcnQgZGF0YSB0byBqc29uLi4uXCIpXHJcbiAgICAgICAgICAgIHNlbGYuX3NldF9yZXBvcnRfZGF0YSh2YWx1ZXMsIHJlcG9ydF9kYXRhKVxyXG4gICAgICAgICAgICBfbG9nZ2VyLmRlYnVnKFwiQ29udmVydGVkISEhXCIpXHJcblxyXG4gICAgICAgIG9iaiA9IHN1cGVyKElyQWN0aW9uc1JlcG9ydCwgc2VsZikucmVuZGVyKHRlbXBsYXRlLCB2YWx1ZXMpXHJcbiAgICAgICAgcmV0dXJuIG9ialxyXG5cclxuICAgIGRlZiBhY3Rpb25fdXBsb2FkX3RlbXBsX3dpbihzZWxmKTpcclxuICAgICAgICByZXNfaWQgPSBzZWxmLl9jb250ZXh0LmdldChcInRlbXBsX2lkXCIsIEZhbHNlKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICduYW1lJzogXygnXHU0ZTBhXHU0ZjIwXHU1ZWI3XHU4NjRlXHU0ZTkxXHU2MmE1XHU4ODY4XHU2YTIxXHU2NzdmJyksXHJcbiAgICAgICAgICAgICd0eXBlJzogJ2lyLmFjdGlvbnMuYWN0X3dpbmRvdycsXHJcbiAgICAgICAgICAgICd2aWV3X3R5cGUnOiAnZm9ybScsXHJcbiAgICAgICAgICAgICdyZXNfbW9kZWwnOiAnY2YudGVtcGxhdGUnLFxyXG4gICAgICAgICAgICAncmVzX2lkJzogcmVzX2lkLFxyXG4gICAgICAgICAgICAjICd2aWV3X2lkJzogRmFsc2UsXHJcbiAgICAgICAgICAgICdjb250ZXh0Jzogc2VsZi5fY29udGV4dCxcclxuICAgICAgICAgICAgJ3RhcmdldCc6ICdjdXJyZW50JyxcclxuICAgICAgICAgICAgJ25vZGVzdHJveSc6IFRydWVcclxuICAgICAgICB9XHJcblxyXG4gICAgQGFwaS5tb2RlbFxyXG4gICAgIyBkZWYgcmVuZGVyX3F3ZWJfaHRtbChzZWxmLCBkb2NpZHMsIGRhdGE9Tm9uZSk6XHJcbiAgICBkZWYgX3JlbmRlcl9xd2ViX2h0bWwoc2VsZiwgZG9jaWRzLCBkYXRhPU5vbmUpOlxyXG4gICAgICAgIGlzX2Rlc2lnbiA9IGRhdGEuZ2V0KFwiaXNfZGVzaWduXCIsIEZhbHNlKVxyXG4gICAgICAgIF9hY3QgPSBfKFwiXHU4YmJlXHU4YmExXCIpIGlmIGlzX2Rlc2lnbiBlbHNlIF8oXCJcdTYyNTNcdTUzNzBcIilcclxuXHJcbiAgICAgICAgcnB0X2RlZmluZSA9IHNlbGYuY2ZfcmVwb3J0X2RlZmluZV9pZFxyXG4gICAgICAgIGlmIHJwdF9kZWZpbmU6XHJcbiAgICAgICAgICAgIGlmIG5vdCBkb2NpZHM6XHJcbiAgICAgICAgICAgICAgICBkb2NpZHMgPSBkYXRhLmdldChcImRvY2lkc1wiLCBOb25lKVxyXG5cclxuICAgICAgICAgICAgc2hvd19tZXNzYWdlID0gU0hPV19NRVNTQUhFX1RFTVBMJShfKFwiXHU2YjYzXHU1NzI4XHU2MjUzXHU1MzcwXHVmZjBjXHU4YmY3XHU3YTBkXHU1MDE5Li4uPGJyLz48YnIvPlx1NTk4Mlx1Njc5Y1x1NjI1M1x1NTM3MFx1NjczYVx1NjcyYVx1OGY5M1x1NTFmYVx1NjJhNVx1ODg2OFx1ZmYwY1x1OGJmN1x1NjhjMFx1NjdlNVx1NWViN1x1ODY0ZVx1NGU5MVx1NjJhNVx1ODg2OFx1NjYyZlx1NTQyNlx1NWRmMlx1NTQyZlx1NTJhOFx1ZmYwMTxici8+PGJyLz48YSBocmVmPVxcXCJjZnByaW50Oi8vb3BlblxcXCI+XHU1NDJmXHU1MmE4XHU1ZWI3XHU4NjRlXHU0ZTkxXHU2MmE1XHU4ODY4PC9hPlwiKSlcclxuXHJcbiAgICAgICAgICAgIGRvY3MgPSBkYXRhLmdldChcImRvY3NcIiwgRmFsc2UpXHJcblxyXG4gICAgICAgICAgICBpZiAobm90IGRvY3Mgb3IgbGVuKGRvY3MpPDEpIGFuZCAobm90IGRvY2lkcyBvciBsZW4oZG9jaWRzKTwxKTpcclxuICAgICAgICAgICAgICAgIGRvY2lkcyA9IHNlbGYuX2NvbnRleHQuZ2V0KFwiYWN0aXZlX2lkc1wiLCBbXSlcclxuXHJcbiAgICAgICAgICAgIGlmIChub3QgZG9jcyBvciBub3QgaXNpbnN0YW5jZShkb2NzLCBsaXN0KSBvciBsZW4oZG9jcyk8MSkgYW5kIGRvY2lkcyBhbmQgcnB0X2RlZmluZSBhbmQgcnB0X2RlZmluZS5tb2RlbF9pZCBhbmQgcnB0X2RlZmluZS5tb2RlbF9pZC5tb2RlbDpcclxuICAgICAgICAgICAgICAgIGRvY3MgPSBzZWxmLmVudltycHRfZGVmaW5lLm1vZGVsX2lkLm1vZGVsXS5icm93c2UoZG9jaWRzKVxyXG5cclxuICAgICAgICAgICAgaWYgKG5vdCBkb2NzIG9yIGxlbihkb2NzKTwxKSBhbmQgKG5vdCBkb2NpZHMgb3IgbGVuKGRvY2lkcyk8MSk6XHJcbiAgICAgICAgICAgICAgICBzaG93X21lc3NhZ2UgPSBTSE9XX01FU1NBSEVfVEVNUEwgJSAoXyhcIlx1NmNhMVx1NjcwOVx1NTNlZlx1NGVlNSVzXHU2NTcwXHU2MzZlXHUzMDAyXCIpJShfYWN0KSlcclxuXHJcbiAgICAgICAgICAgIGRhdGEudXBkYXRlKCBkb2NzPWRvY3MsIHNob3dfbWVzc2FnZT1zaG93X21lc3NhZ2UsIClcclxuXHJcbiAgICAgICAgICAgIGlmIHJwdF9kZWZpbmU6XHJcbiAgICAgICAgICAgICAgICBkYXRhLnVwZGF0ZSggIHJlcG9ydF9kZWZpbmU9cnB0X2RlZmluZSwgKVxyXG4gICAgICAgICAgICAgICAgc3RhcnQgPSB0aW1lLnRpbWUoKVxyXG4gICAgICAgICAgICAgICAgcmVwb3J0X2RhdGEgPSBzZWxmLndpdGhfY29udGV4dChpc19kZXNpZ249aXNfZGVzaWduKS5fbWFrZV9jZnByaW50X2pzb24oZGF0YSlcclxuICAgICAgICAgICAgICAgIGVuZCA9IHRpbWUudGltZSgpXHJcbiAgICAgICAgICAgICAgICBwcmludChcIl9tYWtlX2NmcHJpbnRfanNvbiBjb25zdW1lOiAgJWZcIiAlIChlbmQgLSBzdGFydCkpXHJcbiAgICAgICAgICAgICAgICBzZWxmLl9zZXRfcmVwb3J0X2RhdGEoZGF0YSwgcmVwb3J0X2RhdGEpXHJcblxyXG4gICAgICAgICMgcmV0dXJuIHN1cGVyKElyQWN0aW9uc1JlcG9ydCwgc2VsZikucmVuZGVyX3F3ZWJfaHRtbChkb2NpZHMsIGRhdGEpXHJcbiAgICAgICAgcmV0dXJuIHN1cGVyKElyQWN0aW9uc1JlcG9ydCwgc2VsZikuX3JlbmRlcl9xd2ViX2h0bWwoZG9jaWRzLCBkYXRhKVxyXG5cclxuIyMjIEVuZCBvZiBjZl9yZW5kZXIifQ==